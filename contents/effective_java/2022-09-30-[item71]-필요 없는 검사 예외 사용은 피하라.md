---
date: '2022-09-30'
title: '[item71] 필요 없는 검사 예외 사용은 피하라'
categories: ['effective_java']
summary: '검사 예외는 바깥까지 전파되기 때문에 의존성을 해치기도 하고, 클라이언트에게 `try-catch`를 강제하여 부담스러운 API가 되기도 합니다. 또한 스트림 안에서 검사 예외를 던지는 메서드를 사용할 수 없기 때문에 `Java8` 이후부턴 검사 예외가 더욱 부담스러워졌습니다.'
thumbnail: './effective_java_thumb.png'
---

> **필요 없는 검사 예외 사용은 피하라**

검사 예외는 바깥까지 전파되기 때문에 **의존성을 해치기**도 하고, **클라이언트에게 `try-catch`를 강제**하여 부담스러운 API가 되기도 합니다.

또한 스트림 안에서 검사 예외를 던지는 메서드를 사용할 수 없기 때문에 `Java8` 이후부턴 검사 예외가 더욱 부담스러워졌습니다.

```java
public static void main(String[] args) {
  IntStream.range(0, 5).forEach(i -> 
      ExceptionService.checkedException() // try-catch로 잡지 않으면 사용할 수 없다.
  );
}
```

## 검사 예외를 회피하는 방법
검사 예외는 복구 가능한 예외임을 나타내는 좋은 방법이긴 하지만, 그 외의 상황에서는 단점이 많기 때문에 피하는 것이 좋습니다.

### Optional 반환
검사 예외를 회피하는 가장 쉬운 방법은 적절한 결과 타입을 담은 `Optional`을 반환하는 것입니다.

예외가 발생하면 검사 예외 대신 빈 옵셔널을 반환하면 되기 때문에 간단해 지지만, 예외가 발생한 이유를 알려주는 **부가 정보를 담을 수 없다는 단점**이 있습니다.

검사 예외를 던지는 목적 중 하나가 예외 상황을 복구하는 것인데, 복구하기 위해 **예외가 일어난 부분에 대한 정보를 전달**해야 합니다.

하지만 빈 옵셔널은 그런 부가 정보를 전달할 수 없기 때문에 검사 예외를 완벽하게 대체한다고 보기 어렵습니다.

### 메서드를 2개로 나누어 비검사 예외를 던지게 하기
또 다른 방법으론 검사 예외를 던지는 메서드를 2개로 나누어서 비검사 예외를 던지게 할 수 있습니다.

`effective java`에 나와 있는 예시처럼 **상태 검사 메서드**를 추가하여 **예외가 발생하기 전에 상태를 검사**해 사용자가 처리할 수 있게 한다면 훨씬 유연한 코드를 작성할 수 있을 것입니다.

## 결론
꼭 필요한 곳에서 검사 예외는 프로그램의 안정성을 높여주지만 남용하면 쓰기 힘든 API를 낳습니다.

API 호출자가 예외 상황에서 복구할 방법이 없다면 비검사 예외를 던지도록 하고, 복구가 가능할 지 애매한 상황이라면 옵셔널로 반환하는 것도 고민해 봅시다.
