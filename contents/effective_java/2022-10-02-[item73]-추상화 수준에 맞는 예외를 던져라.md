---
date: '2022-10-02'
title: '[item73] 추상화 수준에 맞는 예외를 던져라'
categories: ['effective_java']
summary: '만약 API를 사용하는데 **수행하려는 일과 관련 없어 보이는 예외**가 튀어나오면 당황스럽기 마련입니다.'
thumbnail: './effective_java_thumb.png'
---

> **추상화 수준에 맞는 예외를 던져라**

만약 API를 사용하는데 **수행하려는 일과 관련 없어 보이는 예외**가 튀어나오면 당황스럽기 마련입니다.

이는 메서드가 **저수준 예외를 처리하지 않고 바깥으로 전파**해버릴 때 종종 일어나는 일로, 클라이언트를 당황시키는 데 그치지 않고, 내부 구현 방식을 드러내어 윗 레벨 API를 오염시킵니다.

심지어 다음 릴리즈에서 구현 방식을 바꾸면 다른 예외가 튀어나와 기존 프로그램을 깨지게 할 수도 있습니다.

이 문제를 피하려면 **상위 계층에선 저수준 예외를 잡아 자신의 추상화 수준에 맞는 예외로 바꿔 던져야 합니다.**

이를 **예외 번역**이라고 합니다.

## JPA에서 예외 번역
`@Repository` 어노테이션은 해당 클래스를 빈으로 등록시키는 것 외에도 **예외 번역**이라는 행위를 해줍니다.

이는 JPA의 구현체로 `Hibernate`나 `DataNucleus`와 같이 여러 종류가 올 수 있어서 **예외가 다양해질 수 있는데,** 스프링이 대신 어떤 구현체가 와도 예외의 의미를 파악할 수 있게 예외 번역을 해줍니다.

## 결론
아래 계층의 예외를 예방하거나 스스로 처리할 수 없고, 그 예외를 상위 계층에 그대로 노출하기 곤란하다면 예외 번역 사용을 고려해봅시다.

이 때 **예외 연쇄**를 사용하면 고수준 예외를 던지면서 근본 원딘도 함께 알려주어 오류를 분석하기에 좋습니다.