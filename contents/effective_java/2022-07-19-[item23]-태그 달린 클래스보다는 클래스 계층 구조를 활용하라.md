---
date: '2022-07-19'
title: '[item23] 태그 달린 클래스보다는 클래스 계층 구조를 활용하라'
categories: ['effective_java']
summary: '태그란 해당 클래스가 어떠한 타입인지에 대한 정보를 담고 있는 멤버 변수를 뜻합니다. 책에 나온 `Figure` 예시가 태그 달린 클래스의 문제를 명확하게 보여주고 있습니다.'
thumbnail: './effective_java_thumb.png'
---

> **태그 달린 클래스보다는 클래스 계층 구조를 활용하라**

태그란 해당 클래스가 어떠한 타입인지에 대한 정보를 담고 있는 멤버 변수를 뜻합니다. 책에 나온 `Figure` 예시가 태그 달린 클래스의 문제를 명확하게 보여주고 있습니다. 이는 **객체 지향 원칙인 SOLID**를 명확하게 깨는 예시입니다.

## 개방 폐쇄 원칙 (OCP)
책의 `Figure` 예시에서 `area` 메서드를 보면 `switch`문으로 각 타입에 대해 구분하여 결과를 내놓고 있습니다. 하지만 이는 명백히 OCP를 위반하는 행위입니다. 책에서 나온 예시처럼, `Square`라는 태그를 추가하고자 한다면, `Square` 관련 된 필드들뿐만 아니라 `area` 메서드, 그리고 혹여나 있을 `Figure`의 다른 메서드 모두 수정해야 한다는 말이 됩니다.

하지만 태그 달린 클래스를 **클래스 계층 구조**로 변환한다면, `Square`라는 새로운 타입을 새로운 클래스로 생성해서 `area`를 재정의하여도 되고, 혹은 책에 나온 것 처럼 `Rectangle`을 상속받아서 간단하게 구현할 수도 있습니다.

## 요약
태그 달린 클래스를 써야 하는 상황은 거의 없습니다. 새로운 클래스를 작성하는 데 태그 필드가 등장한다면 태그를 없애고 계층 구조로 대체하는 방법을 생각해볼 수 있습니다. 기존 클래스가 태그 필드를 사용하고 있다면 계층구조로 리팩토링을 해봅시다.