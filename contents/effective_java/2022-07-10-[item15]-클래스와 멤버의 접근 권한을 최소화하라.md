---
date: '2022-07-10'
title: '[item15] 클래스와 멤버의 접근 권한을 최소화하라'
categories: ['effective_java']
summary: '이번 item부터는 클래스와 인터페이스에 대해 다룹니다. 이번 장에서는 잘 설계 된 컴포넌트를 얼마나 "캡슐화, 정보은닉을 잘 해냈는가" 로 구분합니다.'
thumbnail: './effective_java_thumb.png'
---

> **클래스와 멤버의 접근 권한을 최소화하라**

이번 item부터는 클래스와 인터페이스에 대해 다룹니다. 이번 장에서는 잘 설계 된 컴포넌트를 얼마나 *"캡슐화, 정보은닉을 잘 해냈는가"* 로 구분합니다. 왜 **캡슐화와 정보은닉**이 컴포넌트 설계에 중요한 지 그 장점을 아래에 기술해 두었습니다.

- **시스템 개발 속도를 높여준다.** 여러 컴포넌트들이 독자적이어서 병렬로 개발할 수 있기 때문이다.
- **시스템 관리 비용을 낮춰준다.** 다른 컴포넌트로 교체하는 부담이 적기 때문이다.
- **정보은닉 자체가 성능을 줄여주지는 않지만 성능 최적화에는 도움을 준다.** 다른 컴포넌트에 영향을 주지않고 해당 컴포넌트만 최적화할 수 있는 기회가 생기기 때문이다.
- **소프트웨어 재사용성을 높여준다.** 외부에는 거의 의존하지 않고 독자적으로 동작할 수 있는 컴포넌트라면 낯선 환경에서도 재사용이 가능하다.
- **시스템 전체가 완성되어있지 않더라도 개별 컴포넌트의 동작을 검증할 수가 있다.**

## 정보 은닉의 기본 원칙
기본 원칙은 간단합니다. 바로 모든 클래스와 멤버의 접근성을 가능한 한 좁히는 것입니다. `public`이나 `protected`로 외부 API에 공개가 되어버린다면, 해당 API는 수정 시 클라이언트에 치명적일 수 있지만, `private`이나 `package-private`으로 선언한다면 클라이언트는 내부 구현을 모르기 때문에 언제든지 수정할 수 있습니다. **따라서 최대한 좁은 범위로서 선언하는 것이 좋습니다.**

## 테스트 코드에서 `package-private`
코드를 테스트하려는 목적으로 API를 `public`이나 `protected`로 공개해선 안됩니다. `Java`에는 이런 경우를 위해 `package-private`을 제공합니다. 해당 접근자를 사용하면 테스트 코드를 같은 패키지에 작성하고 손 쉽게 접근하여 코드를 테스트 할 수 있습니다.

## 인스턴스 필드는 되도록 `public`이 아니어야 한다.
필드가 `final`이 아님에도 불구하고 `public`으로 선언되어 있다면 이는 **일반적으로 스레드 안전하지 않습니다.** 심지어 `final`로 선언되어 있다 하더라도 `public`으로 열려있다면, 내부 구현을 바꾸기가 쉽지 않습니다. 물론 상수라면 `public static final`로 선언하는 것을 허용합니다.

### 배열
하지만 `public static final`로 선언되어 있다 할지라도, 배열이라면 얘기가 달라집니다. 배열은 내부 요소가 수정이 가능하므로 되도록이면 `public`으로 선언하지 말고, `private`으로 선언하고 접근자 메서드를 열어주는 것이 바람직합니다.

## 요약
프로그램 요소의 접근성은 가능한 최소한으로 합시다. (기본 원칙) 꼭 필요한 것만 골라 최소한의 `public` API를 설계하고, 그 외에는 클래스, 인터페이스, 멤버가 의도치 않게 API로 공개되는 일이 없도록 해야 합니다. `public` 클래스는 상수용 `public static final` 필드 외에는 어떠한 `public` 필드도 가져서는 안 되며 `public static final` 필드가 참조하는 객체가 불변인지 확인해야 합니다.