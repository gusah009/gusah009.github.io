---
date: '2022-09-04'
title: '[item60] 정확한 답이 필요하다면 float와 double은 피하라'
categories: ['effective_java']
summary: '컴퓨터에서 자료의 표현은 유한합니다. 하지만 실수는 범위나 깊이가 무한하기 때문에 컴퓨터에서 실수를 온전하게 모두 나타내진 못합니다.'
thumbnail: './effective_java_thumb.png'
---

> **정확한 답이 필요하다면 float와 double은 피하라**

컴퓨터에서 자료의 표현은 유한합니다. 하지만 실수는 범위나 깊이가 무한하기 때문에 컴퓨터에서 실수를 온전하게 모두 나타내진 못합니다.

이번 장에서는 실수의 무한함과 컴퓨터의 유한함의 차이에서 오는 문제에 대해 말합니다.

## float과 double은 근사치이다.
`float`과 `double`은 수학적으로 정밀한 **'근사치'**로 계산하도록 설계되었습니다. 

말 그대로 '근사치'이기 때문에 절대 정확한 계산에는 사용하면 안됩니다.

유명한 예제인 `0.1 + 0.2 == 0.3`에 대해 알아보겠습니다.

**결론부터 말하자면 `0.1 + 0.2`는 `0.3`이 아닙니다.**

`0.1`은 이진수로 `0.0001100110011001100110011 ...`입니다. 이진수로 변환하면 무한히 길어지는데, 컴퓨터에선 이 값을 유한한 비트만큼 표현할 수 있기 때문에 완벽한 `0.1`을 표현하진 못합니다.

`0.2`도 역시 마찬가지로 무한소수이기 때문에 유한한 비트로 표현하면서 데이터가 잘리게 되고, 이렇게 근사치로 표현된 `0.1`과 `0.2`를 더하면서 완벽한 `0.3`을 표현하지 못하는 것입니다.

## 해결법
정확한 계산이 필요할 땐 `BigDecimal`이나 `int`, `long`을 사용해야 합니다. 

하지만 `BigDecimal`은 느리고, 사용하기 불편하다는 단점이 있습니다. 되도록이면 (최대 자릿수가 18자리 이하면) `int`나 `long`을 사용하는 것이 좋습니다.