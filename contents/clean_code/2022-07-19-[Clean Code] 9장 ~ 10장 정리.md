---
date: '2022-07-19'
title: '[Clean Code] 9장 ~ 10장 정리'
categories: ['clean_code']
summary: '대학교 3년을 다니면서 수 많은 코드를 작성했지만, 늘 돌아가는데 급급한 코드를 작성했던 것 같습니다. "과거의 나"도 다른 사람이라는 생각으로 깨끗한 코드를 작성해야겠다는 생각을 하게 됐습니다.'
thumbnail: './clean_code_thumb.png'
---

> 대학교 3년을 다니면서 수 많은 코드를 작성했지만, 늘 돌아가는데 급급한 코드를 작성했던 것 같습니다. "과거의 나"도 다른 사람이라는 생각으로 깨끗한 코드를 작성해야겠다는 생각을 하게 됐습니다.

## 9장. 단위 테스트

테스트 코드는 자동화되어야 합니다. 처음 제가 `@Test` 어노테이션이나 자바 프로젝트를 생성하면 처음 생기는 `test`디렉토리를 보았을 땐, 이게 무엇인지, 어디에 쓰는 물건인지 도저히 알기 어려웠습니다. 제가 짠 코드의 테스트는 모두 수동으로 이루어졌었기 때문에 자동화 된 테스트 코드의 존재는 당시 상당한 충격이었습니다. 하지만 이젠 자동화된 테스트 코드가 얼마나 중요한 지 알았고, 좋은 테스트 코드에서 완벽한 코드가 나온다는 것을 깨달았습니다.

### TDD 법칙 3가지
1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

위와 같이 테스트 코드를 작성하다보면 테스트 코드가 프로덕션 코드만큼 방대해집니다.

### 깨끗한 테스트 코드 유지하기
- **[Clean Code] 앞 장**에서 쭉 얘기했던 것 처럼 테스트 코드 역시 깨끗한 코드를 유지해야 합니다.
- 테스트 코드에서 가장 중요한 것은 **가독성**입니다.
  - 가독성을 높이는 방법은 앞 장의 내용들을 테스트 코드에도 적용하는 것입니다.
  - 흔히 사용하는 **given, when, then** 방식도 좋습니다.
  - 간결하고, 표현력이 풍부해야 하지만 **실제 코드만큼 효율적인 필요는 없습니다.**
- 테스트 함수마다 **하나의 개념만** 테스트 해야 합니다.
- 단일 assert문을 사용하도록 합시다.
  - assert문이 하나일 경우 **"하나의 테스트"**임을 말해주기 때문에 좋습니다.

### FIRST
깨끗한 테스트 코드를 위한 다섯가지 규칙입니다.
1. **F**ast(빠르게) : 테스트는 빨라야 합니다. 느리다면 테스트를 돌릴 엄두도 내지 못합니다.
2. **I**ndependent(독립적으로) : 각 테스트는 서로 독립적이어야 합니다. 순서에 의존하게 되면 하나의 테스트 실패 시 어떤 테스트 때문인 지 찾기 어려워집니다.
3. **R**epeatable(반복가능하게)) : 어떤 환경에서도 반복가능해야합니다.
4. **S**elf-Validating(자가검증하는) : 테스틑 항상 **성공 아니면 실패**인 bool 값으로 결과를 내야합니다. 자동화 되지 않은 테스트 코드가 되선 안됩니다.
5. **T**imely(적시에) : 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 작성해야 합니다. 자칫 잘못하다간, 실제 코드를 테스트하기 어렵게 설계할 수도 있습니다.

### 결론
**테스트 코드도 프로덕션 코드만큼 중요하다. 테스트 코드를 프로덕션 코드 작성 전에 작성하는 습관을 기르자.**

## 10장. 클래스
### 클래스 체계
#### 표준 자바 관례에 따른 순서
1. static public 변수 (상수(final)가 먼저 나옴)
2. static private 변수
3. private 인스턴스 변수
4. public 함수
5. private 함수는 자신을 호출하는 public 함수 바로 밑에 위치

### 클래스는 작아야 한다!
- 클래스는 작을 수록 좋습니다. 
  - 크기가 커지면 책임이 많아진다는 것을 의미하므로 **SRP**를 위반하는 것과 같습니다.
- 클래스 이름에 **"Super", "Processor", "Manager"**같은 모호한 단어는 넣지 않는 것이 좋습니다.
- **"if", "and", "or", "but"**을 사용하지 않고 25단어 내외로 만들 수 있으면 좋습니다.
- **응집도**(메서드가 인스턴스 변수를 최대한 사용하는 정도)를 높이는 것이 좋습니다.
  - 만약 메서드가 사용하는 인스턴스 변수가 제한되어 있다면, 클래스를 쪼개야 한다는 신호입니다.
  
### 변경하기 쉬운 클래스
- 만약 클래스를 변경할 이유가 2가지 이상이면, 이는 **SRP를 위반**하는 행위이므로 꼭 클래스를 나누도록 합시다.
- 추상클래스나 인터페이스를 활용해 **결합도를 낮추고**, 테스트를 용이하게 하도록 합시다.