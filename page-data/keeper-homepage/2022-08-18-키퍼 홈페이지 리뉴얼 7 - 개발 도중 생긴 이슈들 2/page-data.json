{"componentChunkName":"component---src-templates-post-template-tsx","path":"/keeper-homepage/2022-08-18-키퍼 홈페이지 리뉴얼 7 - 개발 도중 생긴 이슈들 2/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p>오늘은 출석 랭킹을 매기는 과정에서 동시성 버그를 발견하여 해당 버그를 고친 내용에 대해서 말씀드리겠습니다.</p>\n</blockquote>\n<p>저희 홈페이지에는 <strong>“출석”</strong> 이라는 기능이 있습니다.</p>\n<p>또, 각 출석마다 <strong>“랭킹”</strong> 을 매겨서 보여줍니다.</p>\n<img width=\"439\" alt=\"image\" src=\"https://user-images.githubusercontent.com/26597702/195627249-6c927230-aae9-474c-acff-15dc017c0110.png\" style=\"margin-left:auto;margin-right:auto;width:60%;display:block;\">\n<br>\n<p>테이블을 그림으로 간략화하여 표현하면 위와 같습니다.</p>\n<p>기존의 출석 랭킹 로직은 아래와 같이 <code class=\"language-text\">rank</code>에 대한 정보 없이 출석 record를 <code class=\"language-text\">INSERT</code> 해준 뒤에 <strong>해당 record보다 먼저 들어온 record의 수 + 1</strong> 을 해줘서 <code class=\"language-text\">rank</code>를 결정하였습니다.</p>\n<img width=\"600\" alt=\"image\" src=\"https://user-images.githubusercontent.com/26597702/195735253-4e05f939-e7ed-4db3-8826-48936aa31869.png\" style=\"margin-left:auto;margin-right:auto;width:80%;display:block;\">\n<h2>동시성 문제 발생</h2>\n<p>하지만 위와 같이 등수를 결정하였을 때 같은 등수가 나오는 문제가 발생했습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"sql\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- 사용한 SQL문</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">SELECT</span><span class=\"mtk1\"> A.rank, B.rank, A.date </span><span class=\"mtk4\">as</span><span class=\"mtk1\"> attendance_date, A.id </span><span class=\"mtk4\">as</span><span class=\"mtk1\"> A_id, B.id </span><span class=\"mtk4\">as</span><span class=\"mtk1\"> B_id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">FROM</span><span class=\"mtk1\"> attendance A</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">INNER JOIN</span><span class=\"mtk1\"> attendance B</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">ON</span><span class=\"mtk1\"> A.date = B.date </span><span class=\"mtk4\">AND</span><span class=\"mtk1\"> A.id != B.id </span><span class=\"mtk4\">AND</span><span class=\"mtk1\"> A.rank = B.rank</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">ORDER BY</span><span class=\"mtk1\"> A.id </span><span class=\"mtk4\">DESC</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<br>\n<pre class=\"grvsc-container default-dark\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">+------+------+-----------------+--------+--------+</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">| </span><span class=\"mtk12\">rank</span><span class=\"mtk1\"> | </span><span class=\"mtk12\">rank</span><span class=\"mtk1\"> | </span><span class=\"mtk12\">attendance_date</span><span class=\"mtk1\"> | </span><span class=\"mtk12\">A_id</span><span class=\"mtk1\">   | </span><span class=\"mtk12\">B_id</span><span class=\"mtk1\">   |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">+------+------+-----------------+--------+--------+</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">|   </span><span class=\"mtk7\">31</span><span class=\"mtk1\"> |   </span><span class=\"mtk7\">31</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">2022</span><span class=\"mtk1\">-</span><span class=\"mtk7\">09</span><span class=\"mtk1\">-</span><span class=\"mtk7\">30</span><span class=\"mtk1\">      | </span><span class=\"mtk7\">182807</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">182806</span><span class=\"mtk1\"> |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">|   </span><span class=\"mtk7\">31</span><span class=\"mtk1\"> |   </span><span class=\"mtk7\">31</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">2022</span><span class=\"mtk1\">-</span><span class=\"mtk7\">09</span><span class=\"mtk1\">-</span><span class=\"mtk7\">30</span><span class=\"mtk1\">      | </span><span class=\"mtk7\">182806</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">182807</span><span class=\"mtk1\"> |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">|    </span><span class=\"mtk7\">5</span><span class=\"mtk1\"> |    </span><span class=\"mtk7\">5</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">2022</span><span class=\"mtk1\">-</span><span class=\"mtk7\">07</span><span class=\"mtk1\">-</span><span class=\"mtk7\">17</span><span class=\"mtk1\">      | </span><span class=\"mtk7\">182001</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">182000</span><span class=\"mtk1\"> |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">|    </span><span class=\"mtk7\">5</span><span class=\"mtk1\"> |    </span><span class=\"mtk7\">5</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">2022</span><span class=\"mtk1\">-</span><span class=\"mtk7\">07</span><span class=\"mtk1\">-</span><span class=\"mtk7\">17</span><span class=\"mtk1\">      | </span><span class=\"mtk7\">182000</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">182001</span><span class=\"mtk1\"> |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">|    </span><span class=\"mtk7\">7</span><span class=\"mtk1\"> |    </span><span class=\"mtk7\">7</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">2022</span><span class=\"mtk1\">-</span><span class=\"mtk7\">04</span><span class=\"mtk1\">-</span><span class=\"mtk7\">13</span><span class=\"mtk1\">      | </span><span class=\"mtk7\">180588</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">180587</span><span class=\"mtk1\"> |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">|    </span><span class=\"mtk7\">7</span><span class=\"mtk1\"> |    </span><span class=\"mtk7\">7</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">2022</span><span class=\"mtk1\">-</span><span class=\"mtk7\">04</span><span class=\"mtk1\">-</span><span class=\"mtk7\">13</span><span class=\"mtk1\">      | </span><span class=\"mtk7\">180587</span><span class=\"mtk1\"> | </span><span class=\"mtk7\">180588</span><span class=\"mtk1\"> |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">+------+------+-----------------+--------+--------+</span></span></span></code></pre>\n<p>해당 문제를 재현하기 위해 아래와 같은 테스트 코드를 작성하였습니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> 출석</span><span class=\"mtk11\">_랭킹_동시성문제_테스트</span><span class=\"mtk1\">() throws InterruptedException {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">numberOfThreads</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">10</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memberCountPerThread</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">10</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">ExecutorService</span><span class=\"mtk1\"> </span><span class=\"mtk12\">service</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">Executors</span><span class=\"mtk1\">.</span><span class=\"mtk11\">newFixedThreadPool</span><span class=\"mtk1\">(numberOfThreads);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">CountDownLatch</span><span class=\"mtk1\"> </span><span class=\"mtk12\">latch</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">CountDownLatch</span><span class=\"mtk1\">(numberOfThreads);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">i</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; i &lt; numberOfThreads; i++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">service</span><span class=\"mtk1\">.</span><span class=\"mtk11\">execute</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">-&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">j</span><span class=\"mtk1\"> = </span><span class=\"mtk7\">0</span><span class=\"mtk1\">; j &lt; memberCountPerThread; j++) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">MemberEntity</span><span class=\"mtk1\"> </span><span class=\"mtk12\">newMember</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">generateMember</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">setAuthentication</span><span class=\"mtk1\">(newMember);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">attendanceService</span><span class=\"mtk1\">.</span><span class=\"mtk11\">save</span><span class=\"mtk1\">(</span><span class=\"mtk12\">AttendanceDto</span><span class=\"mtk1\">.</span><span class=\"mtk11\">builder</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">ipAddress</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;127.0.0.1&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">greetings</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;출석 테스트입니다.&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">build</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">latch</span><span class=\"mtk1\">.</span><span class=\"mtk11\">countDown</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">latch</span><span class=\"mtk1\">.</span><span class=\"mtk11\">await</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">distinctRankCount</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">attendanceRepository</span><span class=\"mtk1\">.</span><span class=\"mtk11\">findAll</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk11\">stream</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk11\">map</span><span class=\"mtk1\">(AttendanceEntity</span><span class=\"mtk15\">::</span><span class=\"mtk1\">getRank)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk11\">distinct</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk11\">count</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">attendanceRepository</span><span class=\"mtk1\">.</span><span class=\"mtk11\">deleteAll</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">assertThat</span><span class=\"mtk1\">(distinctRankCount).</span><span class=\"mtk11\">isEqualTo</span><span class=\"mtk1\">(numberOfThreads * memberCountPerThread);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>결과는 아래와 같이 겹치는 rank가 나오면서 테스트에 실패하게 됩니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"s\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">expected: 100L</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> but was: 45L</span></span></code></pre>\n<h2>왜 이런 문제가 발생할까?</h2>\n<p>원인은 바로 동시성 이슈 때문입니다.</p>\n<img width=\"843\" alt=\"image\" src=\"https://user-images.githubusercontent.com/26597702/195773748-aa839c29-e287-43fe-83c7-084ef9ab0d95.png\">\n<p>위 그림과 같이 요청 2개가 동시에 왔을 때 출석 record는 서로 다른 트랜잭션에서 생깁니다.</p>\n<p>MySQL은 Default <code class=\"language-text\">isolation level</code>로 <code class=\"language-text\">REPEATED COMMITTED</code>를 채택하고 있기 때문에, 서로 다른 트랜잭션에서 서로의 데이터를 볼 수 없습니다.</p>\n<p>그렇기 때문에 <strong>자신의 record보다 먼저 들어온 record의 수 + 1</strong>을 통해 rank를 결정하는 로직에서 동시성 문제가 발생했던 것입니다.</p>\n<h2>해결방법1. READ UNCOMMITTED</h2>\n<p>가장 손 쉽게 로직을 변경하지 않고 해결할 수 있는 방법은 <code class=\"language-text\">READ UNCOMMITTED</code>를 활용하는 것입니다.</p>\n<p><code class=\"language-text\">READ UNCOMMITTED</code>를 활용하면 ID가 <code class=\"language-text\">AUTO INCREMENT</code>이기 때문에 다른 트랜잭션에 있어도 삽입되는 순서로 rank를 정할 수 있습니다.</p>\n<p>하지만 <code class=\"language-text\">READ UNCOMMITTED</code>는 <code class=\"language-text\">Dirty Read</code>와 <code class=\"language-text\">Phantom Read</code>의 위험이 있어 <strong>추후에 또 다른 버그를 낳을 확률</strong>이 크기 때문에 해당 방법은 사용하지 않기로 하였습니다.</p>\n<blockquote>\n<p>또, 이유는 모르겠지만 테스트 시에 1,2개 정도 겹치는 rank가 생깁니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">expected: 100L</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">but was: 99L</span></span></code></pre>\n</blockquote>\n<h2>해결방법2. Redis를 활용하여 등수 매기기</h2>\n<p>제가 선택한 방법으로, 외부 인메모리 데이터베이스를 활용하여 <code class=\"language-text\">rank</code>를 동기화하는 방법이 있습니다.</p>\n<p>외부 인메모리로 저는 현재 프로젝트에서 사용중인 <strong>redis</strong>를 선택했습니다.</p>\n<p>redis에는 <strong>increase and get</strong>의 역할을 하는 <a href=\"http://redisgate.kr/redis/command/incr.php\" target=\"_blank\" rel=\"nofollow\"><strong>incr</strong>이라는 기능</a>을 제공하는데, 이를 활용해 rank를 매겼습니다.</p>\n<p>redis는 기본적으로 단일 스레드라 여러 요청이 와도 한 번에 하나의 요청만 처리하기 때문에 동시성 이슈를 걱정할 필요가 없었습니다.</p>\n<p><strong>redis의 incr 기능을 활용해</strong> 로직을 재구성하였고, 아래와 같이 깔끔하게 동시성 테스트를 통과하였습니다.</p>\n<img width=\"229\" alt=\"image\" src=\"https://user-images.githubusercontent.com/26597702/195812118-9ed02585-a001-482a-9661-694adf05732f.png\">\n<h2>다음으로</h2>\n<p>다음 포스팅은 <strong>스케줄러와 테스트 관련 트러블 슈팅한 내용</strong>에 대해 글을 작성해 볼건데, 내용이 조금 어려울 수 있습니다!</p>\n<p>그럼 좋은 하루 보내세요~~!</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"키퍼 홈페이지 리뉴얼 7 - 출석 랭킹 동시성 버그 해결하기","summary":"오늘은 출석 랭킹을 매기는 과정에서 동시성 버그를 발견하여 해당 버그를 고친 내용에 대해서 말씀드리겠습니다.","date":"2022.08.18.","categories":["keeper_homepage"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC70lEQVQ4y22S22/bNhTGDfS1KbY/qX/dHpuXAhu2ZFuDpVjarA9rGthzVF/kbYridkkzNzbmm24WJepCkZKszeI3UC3QPYzAwSHI7/x4+JGtTqezp+v63mAwaMI0zc9ardY9AA8NwzCPj4/1l2dno4ODA/3w20NzONJfAPj8i28e3T/s/PjgSfvZXren7Y10/UG73b7fIoTQvCgY5zwVnDMhBGOMJQDKfr+P09NTDIdDnDw7wQ/fH+H68g0AsEqUKcod2xV/q5o0z/OcEHLXyvO8xv8MKaVKu/+GB7brZ7f1IL7FNV/il+gtLrP3KOuqqRFC+C0hxFbVg/MaUSybOVB/zA1b7EoZVKm8ZFP8HBryFTXl79md/In8Jk8sU67KYJfWAiljTitjrBLbLbLrG8m11+BFAZam4JyDC4GcCywiByQJUbIc//AtqqxExQXypIR5GyKirHYzAsKoozys+qMRTE2Tb4+O8Kth4KLbxcXFBfb39/H85Dm6V330xiM8PvwSj7/7Cj2jj6ftLvZf6Pj6lY6nHb0+++MNkjxxWjQMK48QZJ4n2WKBhHOslktkWYb1eo2IUlgbBx4L0Dd19C6HsOMN1tQD3Wa4cQOEZVZ7aQBK6Qegs9kgdV0ZT2eIWYrFfI40TTGZTBCGIay1BeL56Gs9aF0NjmXDtWykcYrxny5YktRk438Cur4P5rgymUyQZBmWiwUYY5hOp0oE27ZBCEGv18NoNMJms4HjOOoRML7zlLZW+x+AlFaEUhSUSrFYNI9iWzaKooDnNeIGEMdxA7u6umq6Jr6PPC8wWVKlrdXBDTAMw2pl2whXK0lu3kHBZ9NpUzQejxvofD5vOjo/P4emabAsC8vlEmFIcTO1lbZ2XffTlYMoQhmEMv9rjny7hWPbKMsSs9ms8dL3fSRJgsFgAMMwEEVRY0FRlni/jpS2VmuhAjLGKuVFmiQyjaLGF7XJPmYFVFkBVddBEDTXV6E0YZQoTS2EUD/D+Reupp7suS3djQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/5bfa5db721561a3a873f97fa63836c9a/dabe1/attendance_table.png","srcSet":"/static/5bfa5db721561a3a873f97fa63836c9a/748c1/attendance_table.png 220w,\n/static/5bfa5db721561a3a873f97fa63836c9a/04157/attendance_table.png 439w,\n/static/5bfa5db721561a3a873f97fa63836c9a/dabe1/attendance_table.png 878w","sizes":"(min-width: 878px) 878px, 100vw"},"sources":[{"srcSet":"/static/5bfa5db721561a3a873f97fa63836c9a/e9211/attendance_table.webp 220w,\n/static/5bfa5db721561a3a873f97fa63836c9a/158b5/attendance_table.webp 439w,\n/static/5bfa5db721561a3a873f97fa63836c9a/f054b/attendance_table.webp 878w","type":"image/webp","sizes":"(min-width: 878px) 878px, 100vw"}]},"width":878,"height":572}},"publicURL":"/static/5bfa5db721561a3a873f97fa63836c9a/attendance_table.png"}}}}]}},"pageContext":{"slug":"/keeper-homepage/2022-08-18-키퍼 홈페이지 리뉴얼 7 - 개발 도중 생긴 이슈들 2/"}},"staticQueryHashes":["2518467932","429584967"]}