{"componentChunkName":"component---src-templates-post-template-tsx","path":"/effective_java/2022-07-17-[item19]-상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p><strong>상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라</strong></p>\n</blockquote>\n<h2>상속용 클래스의 문서화</h2>\n<p>앞 장에서 보았듯이 상속은 여러 부분에서 주의할 사항이 생깁니다. <strong>따라서 상속용 클래스는 재정의 할 수 있는 메서드들을 내부적으로 어떻게 이용하는 지 문서로 남겨야 합니다.</strong> 책에서 볼 수 있는 대로 <code class=\"language-text\">@implSpec</code>을 통해 해당 메서드를 재정의 했을 때 다른 메서드들에 어떤 영향을 끼칠 지 명시해야 합니다. 하지만 결국 이런 방식도 상속이 캡슐화를 깨버리는 상황에서 나오는 문제라고 볼 수 있습니다.</p>\n<h2>상속용 클래스 설계엔 마법을 부릴 수 없다.</h2>\n<p>책의 저자는 계속해서 상속용 클래스의 위험성에 대해 언급하고 있습니다. 상속용 클래스의 설계에는 뚜렷한 가이드라인이 없으며 <strong>직접 하위 클래스를 만들어보는 것이 유일한 테스트 방법이라고 하고 있습니다.</strong> 따라서 상속용으로 설계한 클래스는 배포 전에 반드시 하위 클래스를 만들어 검증해봐야 합니다.</p>\n<h2>상속용 클래스의 생성자는 재정의 메서드를 호출해선 안된다.</h2>\n<p>이 뿐만이 아니라, <strong>상속용 클래스의 생성자는 재정의 메서드를 호출해선 안됩니다.</strong> 상위 클래스의 생성자가 재정의 메서드를 호출한다면 상위 클래스의 재정의되기 전의 메서드가 호출되는 것이 아니라, 하위 클래스의 재정의 된 메서드가 호출되어 의도와 다르게 동작할 수 있기 때문입니다.</p>\n<h2><code class=\"language-text\">Cloneable</code>과 <code class=\"language-text\">Serializable</code></h2>\n<p><code class=\"language-text\">Cloneable</code>과 <code class=\"language-text\">Serializable</code> 인터페이스도 문제에 한 몫을 더합니다. 위의 생성자 문제와 비슷하게 상속용 클래스의 <strong><code class=\"language-text\">clone</code>과 <code class=\"language-text\">readObject</code>에선 모두 직접적이든 간접적이든 재정의 가능 메서드를 호출해서는 안됩니다.</strong> 만약 <code class=\"language-text\">clone</code>에서 재정의 가능 메서드를 호출했다면 복제가 되기 전에 오작동이 일어날 수 있습니다. 이는 복제분 뿐만 아니라 원본 객체에도 피해를 줄 수 있기 때문에 매우 위험합니다.</p>\n<h2>굳이 클래스를 상속용으로 설계해야 하는가</h2>\n<p>지금까지 클래스를 상속용으로 설계하려면 큰 노력과 위험부담이 따른다는 것을 보았습니다. 따라서 추상 클래스나 인터페이스를 제외하곤 상속을 애초에 금지하는 것이 좋습니다.</p>\n<blockquote>\n<p>왜 추상클래스와 인터페이스는 상속의 제약에서 제외되는 지 다음 장 **[item20]**에서 보겠습니다.</p>\n</blockquote>\n<h2>요약</h2>\n<p>상속용 클래스를 설계하기란 만만치 않습니다. 클래스 내부에서 스스로를 어떻게 사용하는지(자기사용 패턴) 모두 문서로 남겨야 하며, 일단 문서화한 것은 그 클래스가 쓰이는 한 반드시 지켜야 합니다. 다른 프로그래머가 고효율의 하위 클래스를 만들 수 있도록 일부 메서드를 <code class=\"language-text\">protected</code>로 제공해야 할 수 있습니다. 하지만 그 외에 클래스를 확장해야 할 명확한 이유가 없다면 상속을 금지하는 편이 나을 수 있습니다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","frontmatter":{"title":"[item19] 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라","summary":"앞 장에서 보았듯이 상속은 여러 부분에서 주의할 사항이 생깁니다. 따라서 상속용 클래스는 재정의 할 수 있는 메서드들을 내부적으로 어떻게 이용하는 지 문서로 남겨야 합니다.","date":"2022.07.17.","categories":["effective_java"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEUlEQVQ4y52S30/aUBSA+St998FnH3zxxZj45Bv/wpaYbW4mxmwwoTADTkdrS1UmY9PoNu2lLSKgtCj98S0tMHVD9+MmJ+c2+e537+k5idROj6XMEa+KFpLusq60Scttsjsd3mp9cvoV0u4NyxsGz/KnZMrXZNWIuSSjtEirN0i6Q27XJa15JHJ6j0JZZU05QVY+U/xQ5UX+lCerZZY3zyk2TQonNxTkA9bkMkVNIG8rrG7aLL3WeZr+Rl5c8N5sklZ9Euvla7Z2bCTNJqtfsFXpslq64uVmk4x2iXTQRdpzKOxdUdjvktO7bFc6rGsOz4tNUnIb6aMTR/zC4r7DhbrN4XGeyvdP1I0GZt3ENm3qwkKcWQjDxBAWhmEhhMmZYVEXQ6ZuY4o6R1/PSUVC+dBn3ArDgCAIoh1hGMb5dv/76rghb9Q+CfmLF4NBOIAjPAjGH7q9LGJHecC2nZ9C/w50C1SrVRRFodVqIYSg1+vRaDSwbXss/6BwUCaUSiXm5+eZmZlhenqaZDLJ4uIiExMTsZi4kuDPwtFaWVlhYWGBqakpZmdnmZycZG5uLhamUqmY8X3/74RRrtVqGIYRf7uuG5fe6XQGDRjmR0sO7v3o+w34tSF3GxOMhN2hUHlkbKKIx2X0kjvj8+DYbNU8fD+kPwzvH6PvDS6z2sFAmNb65Pc9Nioe7/4zorPZXY/I9QPmkQcBe3w4NQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/327c2a185475980ae96309d9334c4ac8/3e909/effective_java_thumb.png","srcSet":"/static/327c2a185475980ae96309d9334c4ac8/7f2ad/effective_java_thumb.png 204w,\n/static/327c2a185475980ae96309d9334c4ac8/db3cb/effective_java_thumb.png 408w,\n/static/327c2a185475980ae96309d9334c4ac8/3e909/effective_java_thumb.png 815w","sizes":"(min-width: 815px) 815px, 100vw"},"sources":[{"srcSet":"/static/327c2a185475980ae96309d9334c4ac8/2ff66/effective_java_thumb.webp 204w,\n/static/327c2a185475980ae96309d9334c4ac8/1f8c8/effective_java_thumb.webp 408w,\n/static/327c2a185475980ae96309d9334c4ac8/9fe5f/effective_java_thumb.webp 815w","type":"image/webp","sizes":"(min-width: 815px) 815px, 100vw"}]},"width":815,"height":559}},"publicURL":"/static/327c2a185475980ae96309d9334c4ac8/effective_java_thumb.png"}}}}]}},"pageContext":{"slug":"/effective_java/2022-07-17-[item19]-상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라/"}},"staticQueryHashes":[]}