{"componentChunkName":"component---src-templates-post-template-tsx","path":"/infra/2024-04-23-k8s에서 구버전 jdk의 heap size 설정이 이상한 이슈/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p>오늘은 jdk11+9 버전을 k8s에 올렸을 때 heap size 설정이 이상하게 되는 이슈에 대해 알아보겠습니다.</p>\n</blockquote>\n<h2>InitialRAMPercentage, MaxRAMPercentage</h2>\n<p>k8s에 java 서버를 올릴 때 <code class=\"language-text\">InitialRAMPercentage</code>, <code class=\"language-text\">MaxRAMPercentage</code>로 java heap 크기 옵션을 주곤 합니다.</p>\n<p>그럼 보통 기대하기로는 <strong>컨테이너의 <code class=\"language-text\">resources.limit</code> 설정을 기준으로</strong> 퍼센트가 산정되어 heap 크기가 결정될 것을 기대하는데요,</p>\n<p>이번에 제가 겪은 이슈는 <code class=\"language-text\">resources.limit</code> 설정 기준이 아닌 <strong>노드 전체의 메모리를 기준으로 heap 크기가 결정되는</strong> 이슈였습니다.</p>\n<h2>OOM</h2>\n<p>처음 이슈를 알게된 계기는 파드가 자꾸 OOM kill로 <code class=\"language-text\">CrashLoopBackOff</code>가 발생해서 였습니다.</p>\n<p>처음엔 원인을 전혀 모르겠어서 <code class=\"language-text\">resources.limit</code>을 올리다 보니 어느 순간부터 파드가 뜨기 시작했고, jmx exporter로 메모리 사용량을 확인해보니 <strong>노드의 전체 메모리 기준으로 heap 크기가 결정</strong>되고 있었습니다.</p>\n<h3>UseContainerSupport</h3>\n<p>처음 의심했던건 <code class=\"language-text\">UseContainerSupport</code> 옵션이었습니다.</p>\n<p>하지만 jdk11부턴 아래와 같이 default가 true였기 때문에 해당 옵션은 문제가 아니었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/da0bc0921a577ba9f6e8c5e5b9e8488a/9a8ca/useContainerSupport.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.291666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAO0lEQVQI13XDIQoAUQgFQLPNZFQ8kcWq4v3v8BZ+34GhiICZITNxd+jud2awu6gqiAiI6Dczw92hqvgADOUdLNVTwhgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/da0bc0921a577ba9f6e8c5e5b9e8488a/a59e9/useContainerSupport.webp 192w,\n/static/da0bc0921a577ba9f6e8c5e5b9e8488a/0ca9f/useContainerSupport.webp 384w,\n/static/da0bc0921a577ba9f6e8c5e5b9e8488a/dc9b9/useContainerSupport.webp 768w,\n/static/da0bc0921a577ba9f6e8c5e5b9e8488a/cef0d/useContainerSupport.webp 868w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/da0bc0921a577ba9f6e8c5e5b9e8488a/3b721/useContainerSupport.png 192w,\n/static/da0bc0921a577ba9f6e8c5e5b9e8488a/66595/useContainerSupport.png 384w,\n/static/da0bc0921a577ba9f6e8c5e5b9e8488a/fe486/useContainerSupport.png 768w,\n/static/da0bc0921a577ba9f6e8c5e5b9e8488a/9a8ca/useContainerSupport.png 868w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/da0bc0921a577ba9f6e8c5e5b9e8488a/fe486/useContainerSupport.png\"\n            alt=\"useContainerSupport\"\n            title=\"useContainerSupport\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2>코드 확인</h2>\n<p>일단 메모리를 가져오는 부분이 문제라고 판단을 했고, jdk11 코드를 직접 뒤지기 시작했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86b35f28525a914dbb215e754cc9e308/cda85/jdk11_initialRAMFlag.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.020833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAwElEQVQI1xXMQXKCMABAUfaWGWFBoAadKaVAaAANMcEqYGt7/xv9jpu3fMFmm7DZCqSQyDfFrv1CFAM75Tkcv8kqS61Ham34PDr8/ECbiVINDPZKpQ3vTU8Ypzyv4EkYCcIoIRY5B31FKk+uPPvuhmwnCnVC9SNNZ5nmB/14odGGzkwUtSZOJGEseIkEwWuWkmUpeS4ZxxHnJ5b1zs/vH/Z8xk8XlnWlqj5o7Y3WzpRlifMOay3remdeFk7G4JzjH/rKWV2cAA2cAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/86b35f28525a914dbb215e754cc9e308/a59e9/jdk11_initialRAMFlag.webp 192w,\n/static/86b35f28525a914dbb215e754cc9e308/0ca9f/jdk11_initialRAMFlag.webp 384w,\n/static/86b35f28525a914dbb215e754cc9e308/dc9b9/jdk11_initialRAMFlag.webp 768w,\n/static/86b35f28525a914dbb215e754cc9e308/0743e/jdk11_initialRAMFlag.webp 928w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/86b35f28525a914dbb215e754cc9e308/3b721/jdk11_initialRAMFlag.png 192w,\n/static/86b35f28525a914dbb215e754cc9e308/66595/jdk11_initialRAMFlag.png 384w,\n/static/86b35f28525a914dbb215e754cc9e308/fe486/jdk11_initialRAMFlag.png 768w,\n/static/86b35f28525a914dbb215e754cc9e308/cda85/jdk11_initialRAMFlag.png 928w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/86b35f28525a914dbb215e754cc9e308/fe486/jdk11_initialRAMFlag.png\"\n            alt=\"jdk11 initialRAMFlag\"\n            title=\"jdk11 initialRAMFlag\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>만약 <code class=\"language-text\">InitialRAMPercentage</code>가 default이고 <code class=\"language-text\">InitialRAMFraction</code>이 default가 아니면 <code class=\"language-text\">InitialRAMFraction</code>으로 계산하는, 레거시를 위한 코드가 존재하긴 했지만 <code class=\"language-text\">InitialRAMPercentage</code>를 직접 설정해주고 있는 저희에게 해당하는 경우는 아니었습니다.</p>\n<p><a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/jdk-11%2B9/src/hotspot/share/runtime/arguments.cpp#L1888\" target=\"_blank\" rel=\"nofollow\">참고 링크</a></p>\n<h3>phys_mem</h3>\n<p>그러다 아래처럼 <code class=\"language-text\">InitialHeapSize</code>가 0이면 <code class=\"language-text\">phys_mem</code>이라는 값을 기준으로 <code class=\"language-text\">InitialRAMPercentage</code>와 계산을 해 메모리를 할당하는 부분을 발견했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/02343ce24390c1b8edd027dd0506c05d/7daeb/jdk11_InitialRAMPercentage.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 7.8125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjUlEQVQI1y3DTQuCMACA4e6BafkxnTitqbk5Wh6iukSX6Cd0D7p26P/zBtEDzyyIMqRs0MOO1nisP9B0I3I9kNc9USIJVjlhIlnExb9kGQsKIUjT7DcXgiwTzOZhilSa3k201uOmI53dowdP0zuSokZpgzaeurVsto5Sj5xMyede87xUvK4V75vicVZ8AQD7OM3Y4xHTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/02343ce24390c1b8edd027dd0506c05d/a59e9/jdk11_InitialRAMPercentage.webp 192w,\n/static/02343ce24390c1b8edd027dd0506c05d/0ca9f/jdk11_InitialRAMPercentage.webp 384w,\n/static/02343ce24390c1b8edd027dd0506c05d/dc9b9/jdk11_InitialRAMPercentage.webp 768w,\n/static/02343ce24390c1b8edd027dd0506c05d/e2c2f/jdk11_InitialRAMPercentage.webp 1152w,\n/static/02343ce24390c1b8edd027dd0506c05d/5e94d/jdk11_InitialRAMPercentage.webp 1386w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/02343ce24390c1b8edd027dd0506c05d/3b721/jdk11_InitialRAMPercentage.png 192w,\n/static/02343ce24390c1b8edd027dd0506c05d/66595/jdk11_InitialRAMPercentage.png 384w,\n/static/02343ce24390c1b8edd027dd0506c05d/fe486/jdk11_InitialRAMPercentage.png 768w,\n/static/02343ce24390c1b8edd027dd0506c05d/d2d74/jdk11_InitialRAMPercentage.png 1152w,\n/static/02343ce24390c1b8edd027dd0506c05d/7daeb/jdk11_InitialRAMPercentage.png 1386w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/02343ce24390c1b8edd027dd0506c05d/fe486/jdk11_InitialRAMPercentage.png\"\n            alt=\"jdk11 InitialRAMPercentage\"\n            title=\"jdk11 InitialRAMPercentage\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<p>여기서 <code class=\"language-text\">InitialHeapSize</code>는 흔히 아는 <code class=\"language-text\">-Xms</code> 옵션과 같은 옵션으로 JVM 힙 사이즈를 명시적으로 선언해주는 JVM 플래그입니다.</p>\n</blockquote>\n<p><a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/jdk-11%2B9/src/hotspot/share/runtime/arguments.cpp#L1957\" target=\"_blank\" rel=\"nofollow\">참고 링크</a></p>\n<h3>os::physical_memory()</h3>\n<p>그럼 이제 이 <code class=\"language-text\">phys_mem</code>은 어디서 온 녀석인지 살펴봐야합니다.</p>\n<p>아래 코드를 보시면 아시겠지만, <code class=\"language-text\">MaxRAM</code>이라는 값과 <code class=\"language-text\">os::physical_memory()</code> 값을 비교해 더 작은 값을 선택합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e93328bd1955ec3b6ba3560b36129802/98b00/jdk11_phys_mem.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.0625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAvklEQVQI1z3F0VKCQBiAUe5KB8HYXdnll11BEhXRKLqjF6g3sJlepenJv2ZsposzJ0qN4F1JFXrG8YmP94rLUCPSI7Jn7Q+oXJglivk//XdqmCWa+4XiLs5uR/FDTpxZpreJr+uZn+8dn9eOthtoDheM1NhmQPsWs+ludDhi6x4jFUV4pG572tMz1e5ElCjHPF3hCksIG5zbIlKyKjxZ7lEu0HQv7M+v9OPE9jiw0GuWuSfVBUsjKOvRLpDlJb+0TFIC33naHAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e93328bd1955ec3b6ba3560b36129802/a59e9/jdk11_phys_mem.webp 192w,\n/static/e93328bd1955ec3b6ba3560b36129802/0ca9f/jdk11_phys_mem.webp 384w,\n/static/e93328bd1955ec3b6ba3560b36129802/dc9b9/jdk11_phys_mem.webp 768w,\n/static/e93328bd1955ec3b6ba3560b36129802/e2c2f/jdk11_phys_mem.webp 1152w,\n/static/e93328bd1955ec3b6ba3560b36129802/0da4f/jdk11_phys_mem.webp 1202w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e93328bd1955ec3b6ba3560b36129802/3b721/jdk11_phys_mem.png 192w,\n/static/e93328bd1955ec3b6ba3560b36129802/66595/jdk11_phys_mem.png 384w,\n/static/e93328bd1955ec3b6ba3560b36129802/fe486/jdk11_phys_mem.png 768w,\n/static/e93328bd1955ec3b6ba3560b36129802/d2d74/jdk11_phys_mem.png 1152w,\n/static/e93328bd1955ec3b6ba3560b36129802/98b00/jdk11_phys_mem.png 1202w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e93328bd1955ec3b6ba3560b36129802/fe486/jdk11_phys_mem.png\"\n            alt=\"jdk11 phys mem\"\n            title=\"jdk11 phys mem\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그런데 <code class=\"language-text\">MaxRAM</code> 값은 아래와 같이 <strong>default가 128GB</strong>라 이것보다 크긴 어렵기 때문에 <code class=\"language-text\">os::physical_memory()</code>로 <code class=\"language-text\">phys_mem</code>이 할당됐다고 생각할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/75d60812fcf345ee61f767336c9846d4/ea60f/jdk11_maxRAM_default.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.166666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAALklEQVQI12MQEJD9HxjI/P/4cYb/paUM/xkYSMMcHBz/JSUl/6uqqv7X1tb+DwAC9Ria/w2vaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/75d60812fcf345ee61f767336c9846d4/a59e9/jdk11_maxRAM_default.webp 192w,\n/static/75d60812fcf345ee61f767336c9846d4/0ca9f/jdk11_maxRAM_default.webp 384w,\n/static/75d60812fcf345ee61f767336c9846d4/dc9b9/jdk11_maxRAM_default.webp 768w,\n/static/75d60812fcf345ee61f767336c9846d4/668f0/jdk11_maxRAM_default.webp 1060w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/75d60812fcf345ee61f767336c9846d4/3b721/jdk11_maxRAM_default.png 192w,\n/static/75d60812fcf345ee61f767336c9846d4/66595/jdk11_maxRAM_default.png 384w,\n/static/75d60812fcf345ee61f767336c9846d4/fe486/jdk11_maxRAM_default.png 768w,\n/static/75d60812fcf345ee61f767336c9846d4/ea60f/jdk11_maxRAM_default.png 1060w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/75d60812fcf345ee61f767336c9846d4/fe486/jdk11_maxRAM_default.png\"\n            alt=\"jdk11 maxRAM default\"\n            title=\"jdk11 maxRAM default\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/jdk-11%2B9/src/hotspot/share/runtime/arguments.cpp#L1873\" target=\"_blank\" rel=\"nofollow\">참고 링크</a></p>\n<h3>memory.limit_in_bytes</h3>\n<p>코드를 여기 저기 더 살펴보다보면 <code class=\"language-text\">osContainer_linux.cpp</code> 파일에 <code class=\"language-text\">physical_memory</code>를 set하는 부분을 찾을 수 있습니다.</p>\n<p>바로 <code class=\"language-text\">memoty_limit_in_bytes()</code>를 통해서 <code class=\"language-text\">physical memory</code>를 설정해주고 있는데요, <code class=\"language-text\">memory.limit_in_bytes</code> 파일은 cgroup에서 최대 사용자 메모리를 알려주는 파일입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c65339f9340401ca3f604386e6924145/e4ca2/jdk11_memory_limit_in_bytes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.97916666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABPUlEQVQoz32PXW+cMBREeW26bPgyNgaDAQMGFpImG6nK//9fp4pVtVFb9eFopKs7o5nIWIeQmmG54c93/PGOW99Y9zdW/8S2vzDPB357pXMrVTuimp66nym1Ic0FmZBkhQwamWEhKRSPQpNKQ1Z1JNKgOoc77tjlpHUbsnWs553j9XvQaXtmf7qz7CfWeZy/YexEVHUzl0yRZopm3Kh7Ty4NtZ2x041xfaYZVlLZhr8411yLmjiv+JpKLqkMGkgkkWyGcLzmFd14YP035v2FwZ9hYjPuVMNHw4Vc9wgzIe1K2Tji7COk5JKUvzSq+4VLqihlQ60MqdAIbUObL3HOw7Xg4VEEw2/ET8pQ5jOR0H2oWxQVtrYUqkV3E2bwKDMSZ+ov02f+DI20ncPcpGxIMkVSaHLVBhJR/9P0P34AJh62FypVKR4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c65339f9340401ca3f604386e6924145/a59e9/jdk11_memory_limit_in_bytes.webp 192w,\n/static/c65339f9340401ca3f604386e6924145/0ca9f/jdk11_memory_limit_in_bytes.webp 384w,\n/static/c65339f9340401ca3f604386e6924145/dc9b9/jdk11_memory_limit_in_bytes.webp 768w,\n/static/c65339f9340401ca3f604386e6924145/e2c2f/jdk11_memory_limit_in_bytes.webp 1152w,\n/static/c65339f9340401ca3f604386e6924145/b78e0/jdk11_memory_limit_in_bytes.webp 1312w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c65339f9340401ca3f604386e6924145/3b721/jdk11_memory_limit_in_bytes.png 192w,\n/static/c65339f9340401ca3f604386e6924145/66595/jdk11_memory_limit_in_bytes.png 384w,\n/static/c65339f9340401ca3f604386e6924145/fe486/jdk11_memory_limit_in_bytes.png 768w,\n/static/c65339f9340401ca3f604386e6924145/d2d74/jdk11_memory_limit_in_bytes.png 1152w,\n/static/c65339f9340401ca3f604386e6924145/e4ca2/jdk11_memory_limit_in_bytes.png 1312w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c65339f9340401ca3f604386e6924145/fe486/jdk11_memory_limit_in_bytes.png\"\n            alt=\"jdk11 memory limit in bytes\"\n            title=\"jdk11 memory limit in bytes\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/jdk-11%2B9/src/hotspot/os/linux/osContainer_linux.cpp#L436\" target=\"_blank\" rel=\"nofollow\">참고 링크</a></p>\n<h3>cgroup v1과 v2</h3>\n<p>그럼 한 번 간단하게 docker의 ubuntu:latest를 받아서 <code class=\"language-text\">memory.limit_in_bytes</code> 파일을 한 번 살펴봅시다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"shell\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">docker run -it --name ubuntu ubuntu /bin/bash</span></span></code></pre>\n<p><strong>놀랍게도 <code class=\"language-text\">memory.limit_in_bytes</code> 파일이 없습니다.</strong> 뭔가 다른 이름이 있는걸까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c0e89b66aad8e847c5b83730c1ed874d/311af/ubuntu_latest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA1ElEQVQY002Q2aqEQAxEW9xFxR33XRH8/+/L5WS4wzw0SVdXqqpjjuOQbdukLEuZ51mCIBDXdSXPc4njWDzP07coisRxHMmyTA99mqaKh2GoGLNmWRYpikJs25ZhGJSYJIk8zyNN06gw/TRNil/XpXcECIAp+H3fUlWVmPM8pe97daNHgETv++oAZvT7vivnPwCp+F3btsoHN8Z8BAFxgYBgXdcyjqP2uHZdp2nBqXD5HsIkxYikKriu63eApDxQ2Q1rwJ09kghB3/fVCL5lWR+Rn/MHxX95xiYGrDMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c0e89b66aad8e847c5b83730c1ed874d/a59e9/ubuntu_latest.webp 192w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/0ca9f/ubuntu_latest.webp 384w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/dc9b9/ubuntu_latest.webp 768w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/e2c2f/ubuntu_latest.webp 1152w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/f3efb/ubuntu_latest.webp 1536w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/be32c/ubuntu_latest.webp 2384w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c0e89b66aad8e847c5b83730c1ed874d/3b721/ubuntu_latest.png 192w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/66595/ubuntu_latest.png 384w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/fe486/ubuntu_latest.png 768w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/d2d74/ubuntu_latest.png 1152w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/e8464/ubuntu_latest.png 1536w,\n/static/c0e89b66aad8e847c5b83730c1ed874d/311af/ubuntu_latest.png 2384w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c0e89b66aad8e847c5b83730c1ed874d/fe486/ubuntu_latest.png\"\n            alt=\"ubuntu latest\"\n            title=\"ubuntu latest\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>범인은 바로 cgroup의 버전에 있는데요, cgroup이 v2로 올라오면서 <code class=\"language-text\">memory.limit_in_bytes</code> 파일이 없어지고 같은 역할을 하는 파일의 이름이 <code class=\"language-text\">memory.max</code>로 바뀐 것입니다.</p>\n<p>때문에 기존에 <code class=\"language-text\">memory.limit_in_bytes</code> 파일로 사용 가능 메모리를 계산하던 코드들과 최신 버전 컨테이너 OS에서 문제가 생기는 것이었습니다.</p>\n<blockquote>\n<p>원인을 알고 나니 곳곳에 비슷한 문제로 곤욕을 겪고 있는 이슈들이 보이더라구요.</p>\n<p><a href=\"https://github.com/docker/for-mac/issues/6118\" target=\"_blank\" rel=\"nofollow\">https://github.com/docker/for-mac/issues/6118</a>,</p>\n</blockquote>\n<h3>그럼 왜 노드 전체의 메모리를 기준으로 설정이 됐을까?</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c65339f9340401ca3f604386e6924145/e4ca2/jdk11_memory_limit_in_bytes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.97916666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABPUlEQVQoz32PXW+cMBREeW26bPgyNgaDAQMGFpImG6nK//9fp4pVtVFb9eFopKs7o5nIWIeQmmG54c93/PGOW99Y9zdW/8S2vzDPB357pXMrVTuimp66nym1Ic0FmZBkhQwamWEhKRSPQpNKQ1Z1JNKgOoc77tjlpHUbsnWs553j9XvQaXtmf7qz7CfWeZy/YexEVHUzl0yRZopm3Kh7Ty4NtZ2x041xfaYZVlLZhr8411yLmjiv+JpKLqkMGkgkkWyGcLzmFd14YP035v2FwZ9hYjPuVMNHw4Vc9wgzIe1K2Tji7COk5JKUvzSq+4VLqihlQ60MqdAIbUObL3HOw7Xg4VEEw2/ET8pQ5jOR0H2oWxQVtrYUqkV3E2bwKDMSZ+ov02f+DI20ncPcpGxIMkVSaHLVBhJR/9P0P34AJh62FypVKR4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c65339f9340401ca3f604386e6924145/a59e9/jdk11_memory_limit_in_bytes.webp 192w,\n/static/c65339f9340401ca3f604386e6924145/0ca9f/jdk11_memory_limit_in_bytes.webp 384w,\n/static/c65339f9340401ca3f604386e6924145/dc9b9/jdk11_memory_limit_in_bytes.webp 768w,\n/static/c65339f9340401ca3f604386e6924145/e2c2f/jdk11_memory_limit_in_bytes.webp 1152w,\n/static/c65339f9340401ca3f604386e6924145/b78e0/jdk11_memory_limit_in_bytes.webp 1312w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c65339f9340401ca3f604386e6924145/3b721/jdk11_memory_limit_in_bytes.png 192w,\n/static/c65339f9340401ca3f604386e6924145/66595/jdk11_memory_limit_in_bytes.png 384w,\n/static/c65339f9340401ca3f604386e6924145/fe486/jdk11_memory_limit_in_bytes.png 768w,\n/static/c65339f9340401ca3f604386e6924145/d2d74/jdk11_memory_limit_in_bytes.png 1152w,\n/static/c65339f9340401ca3f604386e6924145/e4ca2/jdk11_memory_limit_in_bytes.png 1312w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c65339f9340401ca3f604386e6924145/fe486/jdk11_memory_limit_in_bytes.png\"\n            alt=\"jdk11 memory limit in bytes\"\n            title=\"jdk11 memory limit in bytes\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>앞서 봤던 위 코드에서 값을 찾을 수 없으면 <code class=\"language-text\">-1</code>을 반환하는 코드가 있는데, 때문에 아래처럼 <code class=\"language-text\">Linux::physical_memory</code>를 return하게 되는 것이었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e665312705947e606b5ab20b188a7159/b5cb9/jdk11_physical_memory.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.1875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfklEQVQoz12SbY+iMBRG+bpx5LW00BYoL4KoqDgTk/n/P+xsqO7OZj/cPLdpcnp72qBsDkRCM50fTMs3w+mJaRdUNZGULbG07BPFLsrZxfk7JR+J8vVvv1WwAX+FAm17jus3w+UL5Y4kdiSrJmQ9EauavbCEeUWcWyJhPOh/mAcW9eA3YqHpphvj5RM33Si6hbK/UA5Xiv5K0Z44LE/6+YbtjpR1T5iVf8F/4D/A3FDqDt2MmHYikZZQGEKhCTPNPi28mg2SSosoG99vkH26ZeE5QVkfvJtYObL6iNAtynaU9UAzXqkOV5rpznh90p8/qfqZbl7pTiuyPlBND8yw4I53pGkJiqoj3E5PN/HiJT0SfMQ5mTKk0pDkmlRZsmJz+JoyyrW/VVrU74lfGVSuJ5MF4/nOdFlx04KbV9z8oD1/UQ8zpmpw3YCpHLZu/ToVklSod0qSdwbK9t6BMT1uuDCcV9LSkaiGTHdEsiIrGjbXQjtf21Svh1Ds/Nf5yd9dq9C5tEpyKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e665312705947e606b5ab20b188a7159/a59e9/jdk11_physical_memory.webp 192w,\n/static/e665312705947e606b5ab20b188a7159/0ca9f/jdk11_physical_memory.webp 384w,\n/static/e665312705947e606b5ab20b188a7159/dc9b9/jdk11_physical_memory.webp 768w,\n/static/e665312705947e606b5ab20b188a7159/e2c2f/jdk11_physical_memory.webp 1152w,\n/static/e665312705947e606b5ab20b188a7159/aa71c/jdk11_physical_memory.webp 1532w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e665312705947e606b5ab20b188a7159/3b721/jdk11_physical_memory.png 192w,\n/static/e665312705947e606b5ab20b188a7159/66595/jdk11_physical_memory.png 384w,\n/static/e665312705947e606b5ab20b188a7159/fe486/jdk11_physical_memory.png 768w,\n/static/e665312705947e606b5ab20b188a7159/d2d74/jdk11_physical_memory.png 1152w,\n/static/e665312705947e606b5ab20b188a7159/b5cb9/jdk11_physical_memory.png 1532w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e665312705947e606b5ab20b188a7159/fe486/jdk11_physical_memory.png\"\n            alt=\"jdk11 physical memory\"\n            title=\"jdk11 physical memory\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11u/blob/jdk-11%2B9/src/hotspot/os/linux/os_linux.cpp#L212\" target=\"_blank\" rel=\"nofollow\">참고 링크</a></p>\n<h2>최신 k8s에서 jdk11 java heap 설정이 이상했던 이유</h2>\n<p>다시 본론으로 돌아오면, <code class=\"language-text\">jdk11+9</code>에서 java heap 설정이 이상했던 이유는 전체 메모리 계산을 할 때 <code class=\"language-text\">memory.limit_in_bytes</code> 파일을 찾을 수 없어 리눅스 전체 램을 기준으로 메모리를 산정했고, 전체 램을 기준으로 Percentage를 할당하다보니 생각했던 <code class=\"language-text\">resources.limits</code> 값 보다 큰 메모리가 할당되기도 했던 것입니다.</p>\n<p>해결방법은 조금 허무하지만 최신 jdk 버전을 사용하면 됩니다.</p>\n<p>jdk17만 봐도 <code class=\"language-text\">cgroupV2</code>에 대응한 코드가 있다는 것을 알 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba317119ec991befa42fc1c3e6d85a1a/a20ca/jdk17_cgroupv2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.916666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+ElEQVQY043Py26DMBCFYdYJCcbY2OZiIARigdtEkSq1XVTq+z/UX4G66a6Lb0ZHczaTaG2Zx0CIH8THN/H+xW15J758cpvuzNMra3ximx7rR0wzILUjL0pyZcikRuy2XJJso3Ae08+Y7orxI6oZ6MOd6/pguMXduD65LE+G8KDuZ5wfqbqRyxQYrgHfj7huJjkIg9YV67QwxTfqISCNp2gD0vYcc0cqK86qJs0tqdy43Uk6hK7JVM1ZVXsvOYoSqWtU4Tjrlsx0iLIh1xVCV2TKsXWOQv/uvw6Z/nNLToXD2RZrPcINqDbQXJb9raqbKKzfi2lu/uUHckeCCpaODTwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ba317119ec991befa42fc1c3e6d85a1a/a59e9/jdk17_cgroupv2.webp 192w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/0ca9f/jdk17_cgroupv2.webp 384w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/dc9b9/jdk17_cgroupv2.webp 768w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/e2c2f/jdk17_cgroupv2.webp 1152w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/8a635/jdk17_cgroupv2.webp 1428w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ba317119ec991befa42fc1c3e6d85a1a/3b721/jdk17_cgroupv2.png 192w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/66595/jdk17_cgroupv2.png 384w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/fe486/jdk17_cgroupv2.png 768w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/d2d74/jdk17_cgroupv2.png 1152w,\n/static/ba317119ec991befa42fc1c3e6d85a1a/a20ca/jdk17_cgroupv2.png 1428w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ba317119ec991befa42fc1c3e6d85a1a/fe486/jdk17_cgroupv2.png\"\n            alt=\"jdk17 cgroupv2\"\n            title=\"jdk17 cgroupv2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk/blob/master/src/hotspot/os/linux/cgroupV2Subsystem_linux.cpp#L225\" target=\"_blank\" rel=\"nofollow\">참고 링크</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"k8s에서 구버전 jdk의 heap size 설정이 이상한 이슈","summary":"오늘은 jdk11+9 버전을 k8s에 올렸을 때 heap size 설정이 이상하게 되는 이슈에 대해 알아보겠습니다.","date":"2024.04.23.","categories":["Infra"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsklEQVQoz52STUhUcRTFf+89PzDCGBAikCE1P1JHHVCbdLQigpCC2rQa8eOJM46OM4pBCgMiEWFiszJa1aJtuYsgyEW0ayO0EaPkvf//+YkIgaO0+MuTEUREGA8czl1cLufecyk3beoGhBZISCOQkHp1v6Cyz8Y/JPDHHLJGTVjoBH/j7bQoDlkopSg3LS3l6uOP2Q90HVGzdOFarx0t7bYevf/6j5Kuv3gfzmvAETlWn0XwD4rW9jHHMl9vqtD0hgok5Lf6yIrncvAV50KFab+deLetFhZ30wuLu/+fvFhXxSHrAXDHyC/0AZVAJ1ACXAfqXR9AKRAE2oAyd1kgl8aY/DH7aUf9XN7b+/4rnY7Nbaqq8FYS6NX0vGlgEpgFUsAMEAdGgDfAFPAceAm4K3kp67FDHck1lZrfUZMftlVzXG5V9VkV+0qRe/HKJaAI8AAFGTUyLDxGT6Yvh5ZRx3U56ouILw1R8bkhKm7XDdiYUmlaTkH2N+xIrmk34pKrXRa1YeH+JL6I0A9jNfI5JemTOPEN9/9w66mj3322qt8bXzWahqV+c8QhkJD4B2XWDg8APkmTYvd/6agAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/6d2bac6b3961b2da6af255d75e4bcdd8/5816c/kubernetes_logo_icon_168360.png","srcSet":"/static/6d2bac6b3961b2da6af255d75e4bcdd8/fbd2a/kubernetes_logo_icon_168360.png 125w,\n/static/6d2bac6b3961b2da6af255d75e4bcdd8/64de5/kubernetes_logo_icon_168360.png 250w,\n/static/6d2bac6b3961b2da6af255d75e4bcdd8/5816c/kubernetes_logo_icon_168360.png 499w","sizes":"(min-width: 499px) 499px, 100vw"},"sources":[{"srcSet":"/static/6d2bac6b3961b2da6af255d75e4bcdd8/a32ff/kubernetes_logo_icon_168360.webp 125w,\n/static/6d2bac6b3961b2da6af255d75e4bcdd8/62fc2/kubernetes_logo_icon_168360.webp 250w,\n/static/6d2bac6b3961b2da6af255d75e4bcdd8/4c7fb/kubernetes_logo_icon_168360.webp 499w","type":"image/webp","sizes":"(min-width: 499px) 499px, 100vw"}]},"width":499,"height":256}},"publicURL":"/static/6d2bac6b3961b2da6af255d75e4bcdd8/kubernetes_logo_icon_168360.png"}}}}]}},"pageContext":{"slug":"/infra/2024-04-23-k8s에서 구버전 jdk의 heap size 설정이 이상한 이슈/"}},"staticQueryHashes":["2518467932","429584967"]}