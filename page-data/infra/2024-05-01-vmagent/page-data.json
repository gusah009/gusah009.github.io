{"componentChunkName":"component---src-templates-post-template-tsx","path":"/infra/2024-05-01-vmagent/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p>오늘은 VictoriaMetrics의 메트릭 수집기 vmagent에 대해 알아보겠습니다</p>\n</blockquote>\n<h1>vmagent</h1>\n<p>vmagent는 <strong>VictoriaMetrics</strong>에서 만든 메트릭 수집기 입니다.</p>\n<p>vmagent를 알려면 VictoriaMetrics에 대해 먼저 알아야 합니다.</p>\n<h2>VictoriaMetrics</h2>\n<p>VictoriaMetrics는 시계열 DB 중 하나입니다.</p>\n<p>대표적인 시계열 DB로 모두가 아는 prometheus가 있는데, VictoriaMetrics는 prometheus와의 호환을 중요하게 생각합니다.</p>\n<p>PromQL을 지원함과 동시에 MetricsQL 이라는 자체 쿼리 언어도 만들어 조금 더 나은 성능을 보여주기도 합니다.</p>\n<p>가장 큰 차이 2가지는 HA와 장기 보관 입니다.</p>\n<ol>\n<li>Prometheus는 scale-out이 어려워 단일 실패 지점이 되는 반면 VictoriaMetrics는 Cluster 버전을 제공해 각각의 요소를 scale-out 할 수도 있습니다.</li>\n<li>Prometheus는 설계상 장기 스토리지용이 아닙니다. 하지만 VictoriaMetrics는 장기 데이터를 저장하기 적합하고 심지어 공식 docs에서 prometheus의 장기 저장소로 사용해도 좋다고 가이드하고 있습니다. <a href=\"https://docs.victoriametrics.com/single-server-victoriametrics/#prometheus-setup\" target=\"_blank\" rel=\"nofollow\">https://docs.victoriametrics.com/single-server-victoriametrics/#prometheus-setup</a></li>\n</ol>\n<blockquote>\n<p>naver D2의 최신 발표로도 VictoriaMetrics가 등장했었습니다.</p>\n<p><a href=\"https://d2.naver.com/helloworld/6867189\" target=\"_blank\" rel=\"nofollow\">https://d2.naver.com/helloworld/6867189</a></p>\n</blockquote>\n<h3>VictoriaMetrics Cluster</h3>\n<p>VictoriaMetrics는 대용량 메트릭 수집을 위해 <a href=\"https://docs.victoriametrics.com/cluster-victoriametrics/\" target=\"_blank\" rel=\"nofollow\">클러스터 버전</a>을 제공합니다.</p>\n<p>초당 100만개 이하의 데이터는 단일 노드 버전이 좋지만, 그 이상이 되면 클러스터 버전을 사용하길 권장하는데요, 클러스터 버전의 가장 큰 특징은 성능과 용량을 <strong>수평적으로 확장</strong>할 수 있다는 점입니다.</p>\n<p>아래는 가장 대표적으로 VM Cluster를 표현하는 그림입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/47d4693fdfb1aed4cc6252c804b26a20/829bf/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.70833333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACYElEQVQoz12Sy27aUBRF/f+fUanDqKo6aaKSNCKQ0ABtajDE2NeAn8SP+37Y1/atwE0HXaMzOWdvLR0rDEOEEH+HMVbXddd1XMjlLn50Dm6Y911rjAmzcjSzRzO7QNT0ndbaCoLgcDgAAIILcRxrrdu2VXUdpKW9O/rRKS1gViIQnZaO/+s1gIRp3TRNYyVJIoQwxvQXjDGc8zRNt9vtIfDDQxBF0XQF7pbuJojbWnS6FpxRxiCE1na7BQDkeX46nSCEGGMIYVPXqm524ckBMWGia4ck7UVva5BUhBtjpJQWISTP8yzL8jznnDdNQwjRWtdN+wLS+TYkoh56tV3n7NMfm/0bpH+Xq6rSWpsLQ22EkBBimBslOaOUUkII50wJ3ndtd4Fzbvm+n6ZpeSHPc631INwYg5mcrvb3P3dD1Hqf3S7cFy8ekpRSVl3X/5IHMMZSSmNM27XJWxlEGcRUCpHmlR8mFWZDRyGE5XleHMfoHaUUIUQp1XZdQXhWIFUrrRupVNdqiGlaYiLOp8/LSZKEYXi8gDFu25ZS2jRN1/cLN36wAebyXUe/PZ5GSzfK8UWYsgYx/wkry5JSQgnGCFYV/L07LhwAwoxgiBGilDBGi6KwAAAIISmkFFJdkFIyzgnlCFOEcFHBxeYwW/kbEEFMIMIVRIgyQtnZtuu6juO4rut5HiHEmP5E1P0qHNvHsOLLfTV9zSrVrw7F9dx7TeAuIzdLYB9LazKZzOdzx3HW67Vt2+eH8727x/mHz6OPX27vnxZfx/NP36aT+cvNeHZ1Pb6dPH9/Wl7dPNw8PP8BPC0E7FJ1jd4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/47d4693fdfb1aed4cc6252c804b26a20/a59e9/Untitled.webp 192w,\n/static/47d4693fdfb1aed4cc6252c804b26a20/0ca9f/Untitled.webp 384w,\n/static/47d4693fdfb1aed4cc6252c804b26a20/dc9b9/Untitled.webp 768w,\n/static/47d4693fdfb1aed4cc6252c804b26a20/8d95b/Untitled.webp 1104w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/47d4693fdfb1aed4cc6252c804b26a20/3b721/Untitled.png 192w,\n/static/47d4693fdfb1aed4cc6252c804b26a20/66595/Untitled.png 384w,\n/static/47d4693fdfb1aed4cc6252c804b26a20/fe486/Untitled.png 768w,\n/static/47d4693fdfb1aed4cc6252c804b26a20/829bf/Untitled.png 1104w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/47d4693fdfb1aed4cc6252c804b26a20/fe486/Untitled.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>크게 storage 역할을 하는 <code class=\"language-text\">VMStorage</code>, storage에 저장된 시계열 데이터를 가져오는 <code class=\"language-text\">VMSelect</code>, 그리고 데이터를 넣는 <code class=\"language-text\">VMInsert</code>로 구분됩니다.</p>\n<p>이 중에 이번에 관심있는 파트는 <code class=\"language-text\">VMInsert</code>와 그 아래 <code class=\"language-text\">Writers</code>입니다.</p>\n<p><code class=\"language-text\">VMInsert</code>는 그림에서 알 수 있다시피 push 방식으로 메트릭을 집어넣어야 합니다.</p>\n<blockquote>\n<p>single node 버전에선 push 방식과 pull 방식을 모두 지원한다고 합니다.</p>\n<p><a href=\"https://docs.victoriametrics.com/quick-start/#write-data\" target=\"_blank\" rel=\"nofollow\">https://docs.victoriametrics.com/quick-start/#write-data</a></p>\n</blockquote>\n<h2>vmagent</h2>\n<p>위에서 push 방식으로 데이터를 <code class=\"language-text\">VMInsert</code>에 넣어야 한다는 것을 알았습니다.</p>\n<p>예상하셨다시피 vmagent의 역할은 데이터를 가져와 <code class=\"language-text\">VMInsert</code>에 데이터를 밀어넣어주는 역할을 합니다.</p>\n<blockquote>\n<p>이 때 push는 prometheus의 remote WRITE API와 같은 스펙으로 값이 들어갑니다.</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 685px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e24f4d0495fb9c512d7a372cf40eb39/a31f0/Untitled_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5ElEQVQY03XQy46FIAwGYN///TwbQ7yBoIK1qEDxwslIZjPJfIsumv6L/gUR+RcRPa/0j/u+4yu8zvMsENF7H0JgjAHAfd/W2rzx3gPAcRxaa+ecMUYpBQCIOM+zEKIgIgAgomEYqqrSWldVZYzRWkspu64bx5FzzhhTSq3rKqXknEspl2X5CSNijFEp9fl8tm2LMU7TJISo67pt22maUkqIyDkHAM550zR93xtjCinl9irLchiGlNLzPES073uMERGJKP+MiCEE+mWtLYQQXdflue97DufrP+Vd15WL8N4754joC5MPVE4gFHdiAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6e24f4d0495fb9c512d7a372cf40eb39/a59e9/Untitled_1.webp 192w,\n/static/6e24f4d0495fb9c512d7a372cf40eb39/0ca9f/Untitled_1.webp 384w,\n/static/6e24f4d0495fb9c512d7a372cf40eb39/ef8ff/Untitled_1.webp 685w\"\n              sizes=\"(max-width: 685px) 100vw, 685px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6e24f4d0495fb9c512d7a372cf40eb39/3b721/Untitled_1.png 192w,\n/static/6e24f4d0495fb9c512d7a372cf40eb39/66595/Untitled_1.png 384w,\n/static/6e24f4d0495fb9c512d7a372cf40eb39/a31f0/Untitled_1.png 685w\"\n            sizes=\"(max-width: 685px) 100vw, 685px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6e24f4d0495fb9c512d7a372cf40eb39/a31f0/Untitled_1.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3>why vmagent?</h3>\n<p>사실 데이터를 scraping 하고 저장하는 기능은 prometheus에도 있습니다.</p>\n<p>그럼 왜 굳이 vmagent를 사용해야 할까요?</p>\n<ol>\n<li>\n<p>기본적으로 vmagent는 경량화 수집기로써 만들어졌기 때문에 prometheus에 비해 적은 CPU, RAM, 디스크 IO를 필요로 합니다.</p>\n</li>\n<li>\n<p>또 vmagent는 구성되어 있는 각 원격 스토리지에 대해 독립적인 디스크 지원 버퍼를 제공합니다.</p>\n<p>즉, 속도가 느리거나 일시적으로 사용할 수 없는 스토리지가 있어도 정상 스토리지로 데이터를 병렬로 전송하는 데 지장이 없는 반면 Prometheus는 구성된 모든 원격 스토리지 시스템에 대해 단일 공유 버퍼를 사용하기 때문에 한 곳에서 병목이 생기면 느려질 수 밖에 없습니다.</p>\n</li>\n<li>\n<p>무엇보다 vmagent는 많은 수의 대상을 스크래핑 하기 위해 scale-out을 지원합니다.</p>\n<p>아래와 같이 <code class=\"language-text\">-promscrape.cluster.membersCount</code> 옵션으로 vmagent의 수를 정해주고, 각 vmagent에 0~N-1 에 해당하는 고유 번호를 <code class=\"language-text\">-promscrape.cluster.memberNum</code> 옵션으로 주기만 하면 됩니다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">/path/to/vmagent -promscrape.cluster.membersCount=2 -promscrape.cluster.memberNum=0 -promscrape.config=/path/to/config.yml ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">/path/to/vmagent -promscrape.cluster.membersCount=2 -promscrape.cluster.memberNum=1 -promscrape.config=/path/to/config.yml ...</span></span></span></code></pre>\n</li>\n</ol>\n<p>vmagent 3대를 띄워서 각각 memberNum을 1, 2, 3으로 주고 스크래핑을 해보겠습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8eb367363bd7f69bef12c45365dd254/7b0a6/Untitled_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.208333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACTklEQVQoz22SWW/TUBCF/dsBgUDiDZ544Imngtq0QEgpWyvKWhKShtBmtZ1rO46Xa+c6cbx9qEFUbCN9L+dozmg0o71+fo+9vR2e1u7TeHSNx1tX2d+5wbPtWxzsP2C3tk2jdof6wys8fXSN/dpNXtbv0nj2kL3aFvvbN3m8dYXGznWe795G+/zmE/WDFi8+NmkNxkxFgHAkndM+R41j6m86HLVanOn2xjPtkO6XUw7q72m8bfH+WxdjOscUHqaYoynfZmjM8SOfokqAFMiQgYNrWQynPss0pKpSuIA1UegxMSV2kJCVa6qq4qLKskQLnRPO+y30cYfIGxD5A5axjmV8ZWYc0+ud4IoukdcnkQMW4RDbHjLSdc5HBosoRMqASAb4QYBmWi7doY9wF6yzglAqVusK27YQkybNbg9/rrNeuiSxxVK5eNYp4+EX2r0uy9hgtZiSqikLqaPF0sAWQ2b2mEU0IwptVOzhTL/jm68Rkw/MxQlJ0GUZdlHBNzy3z3ymI8wBMrCIpbPpi6SLFrkdxqMO+rhNGuukiyn5aoZr9fDMd/T7TVzRJlNj8kRnrUyke4pjNjk7b6OCAWs1JV8KkligjYTFxHBw3IBQxsxcj2iRYosR7nCX8fkhzuQY5bVI/BYq+I5vvMIZPGF0dkggPmy8Vdgmmn9FK4qcssihKjdXqqpyc7FExWQrnzILydOAKo+hVFS5Ik8lVSYp0oBiHUKhLtH4q369gFKKPC/514csK/7UfkO7CPiby8AsuxzyU682G2RZxv/6LvgBqKAs8x3IIuYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/f8eb367363bd7f69bef12c45365dd254/a59e9/Untitled_2.webp 192w,\n/static/f8eb367363bd7f69bef12c45365dd254/0ca9f/Untitled_2.webp 384w,\n/static/f8eb367363bd7f69bef12c45365dd254/dc9b9/Untitled_2.webp 768w,\n/static/f8eb367363bd7f69bef12c45365dd254/e2c2f/Untitled_2.webp 1152w,\n/static/f8eb367363bd7f69bef12c45365dd254/f3efb/Untitled_2.webp 1536w,\n/static/f8eb367363bd7f69bef12c45365dd254/97026/Untitled_2.webp 5116w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/f8eb367363bd7f69bef12c45365dd254/3b721/Untitled_2.png 192w,\n/static/f8eb367363bd7f69bef12c45365dd254/66595/Untitled_2.png 384w,\n/static/f8eb367363bd7f69bef12c45365dd254/fe486/Untitled_2.png 768w,\n/static/f8eb367363bd7f69bef12c45365dd254/d2d74/Untitled_2.png 1152w,\n/static/f8eb367363bd7f69bef12c45365dd254/e8464/Untitled_2.png 1536w,\n/static/f8eb367363bd7f69bef12c45365dd254/7b0a6/Untitled_2.png 5116w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/f8eb367363bd7f69bef12c45365dd254/fe486/Untitled_2.png\"\n            alt=\"Untitled2\"\n            title=\"Untitled2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그럼 각각의 vmagent들이 서로 데이터를 나눠서 수집하는 것을 볼 수 있습니다.</p>\n<p>vmagent가 수집하지 않는 메트릭의 Status가 노란색으로 <code class=\"language-text\">DROPPED (sharding)</code> 이 떠 있는걸 볼 수 있는데요, 이건 <em>‘샤딩을 한 다른 vmagent가 수집해줄거야’</em> 라는 의미입니다.</p>\n<p>여기서 만약 4개의 메트릭을 수집하던 vmagent-0가 죽으면 어떻게 될까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8107f4464f4d55264217aead71191a12/ec6d1/Untitled_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.520833333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFklEQVQY0y2QQW6DMAAEeUICJICxjbEBm0KAJNAmldpL//+mqYJyWGm0mtNEJ22RtqYIN04mEAtFUlYkpSGR9Zs1sdBklUM2nlQaztpxFBVF3SKsJ68Dwn0QyX5Fzg+6xx/t9ZuyuyD9hBo29PKLGh+ocKXsJuy4YoYbyk+01yf1/KSZNtr5CzN+4uYnkXADeT9h7z+YcSMzHXntKZoREe6IsFK00/4rf0F1I4UN6H5B+IUqTJh+Qb64vxGdZc3BNYhx3cVjXnIsJLFypHYkrQdiZTlkgtw48sqRCEX+crVH2JbSebLKU9ieKHu1aDr0tKHaYW+VCE2qG07uwskOpKYnLg25afalsqJoPkhMj7AdpQvvhgP/nwqLrWsbJdsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/8107f4464f4d55264217aead71191a12/a59e9/Untitled_3.webp 192w,\n/static/8107f4464f4d55264217aead71191a12/0ca9f/Untitled_3.webp 384w,\n/static/8107f4464f4d55264217aead71191a12/dc9b9/Untitled_3.webp 768w,\n/static/8107f4464f4d55264217aead71191a12/e2c2f/Untitled_3.webp 1152w,\n/static/8107f4464f4d55264217aead71191a12/f3efb/Untitled_3.webp 1536w,\n/static/8107f4464f4d55264217aead71191a12/d13c0/Untitled_3.webp 2884w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/8107f4464f4d55264217aead71191a12/3b721/Untitled_3.png 192w,\n/static/8107f4464f4d55264217aead71191a12/66595/Untitled_3.png 384w,\n/static/8107f4464f4d55264217aead71191a12/fe486/Untitled_3.png 768w,\n/static/8107f4464f4d55264217aead71191a12/d2d74/Untitled_3.png 1152w,\n/static/8107f4464f4d55264217aead71191a12/e8464/Untitled_3.png 1536w,\n/static/8107f4464f4d55264217aead71191a12/ec6d1/Untitled_3.png 2884w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/8107f4464f4d55264217aead71191a12/fe486/Untitled_3.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그냥 vmagent는 작동을 멈추고 다른 vmagent가 <strong>그 일을 대신하진 않습니다.</strong></p>\n<p>vmagent 끼리 서로의 존재를 모르기 때문에 어찌보면 당연한 결과입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/911a7f8442d70f9ebf23d2bd2b1cce84/7b0a6/Untitled_4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.208333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACaElEQVQoz3WPbUtTcRyG9xECH9o0a+7BBwIr6FsUvTEKTYy+Ri+CBMGIXgTRN0jC5xnmZpRUGGo+bKutNJ/OPMejO9vZOdvZ2ea2c8WcSqD94OL+ww0X/9s2NfqC4eEhRt6+ZuLNYyYGnzA19JTpsQE+fhhk0jdOwPeK6ZE+3o/2ExgfIDD5Er9/hHe+YWbGnzE13Id/rJ8Z33NsDZc8OBouY29w4mj00tjUyoWaJm7dvsvi7BJTs2G+BoOsCTLSnoogJVldWOFTYBH/XJD5aISYqLArJdiVFGwut5eW1naaXV6aXW7cHi/1Fx309HSjJxNs7CbI5lJYVh4oYJVNlAMZQUojq1kOywUsy6Jy5XIZm7PZw7XrN2m/2kHl7XK3UFffwIOuTlL734lEl4hLEfTEOllt8ygF4RfbsRjrmzEyegpNU9E1laSqVoWt7R24PG1ccbqPhPbGZrq77qHIUVZ+RkkoAgUzjpnZI6PvIwur7GwFCUcjmOkYuYxI3hDJaEJVWJlbkVVwe9pwttygp7sT42AOcXseRVwmq0YwU1HSyg9kKUpSiSHG/qCpe6S1ffSUjK7Fq8KKqJLVyV5qau1HkzPxZdbXVzgQQxxmtimZAqYuEBdXiUsh1tbCGOoGBUOkaEpk01JVeEJ1spe6i01037+DLgbY+v0ZeecbRiKIqYZIJyLImzMcbE2ztfYFVVo46nKpMLoSOu+HLdTWO+jt7QXLoJRXKeZUrGIaylmKBZ1sRoGSTjGvUipoUDJOOV9YZ6f34SP+Pes4i8UyRtY8053wH6HjVGhZ5WOsY2ERwzCOO+sMfwHm0oqxj9366AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/911a7f8442d70f9ebf23d2bd2b1cce84/a59e9/Untitled_4.webp 192w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/0ca9f/Untitled_4.webp 384w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/dc9b9/Untitled_4.webp 768w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/e2c2f/Untitled_4.webp 1152w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/f3efb/Untitled_4.webp 1536w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/97026/Untitled_4.webp 5116w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/911a7f8442d70f9ebf23d2bd2b1cce84/3b721/Untitled_4.png 192w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/66595/Untitled_4.png 384w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/fe486/Untitled_4.png 768w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/d2d74/Untitled_4.png 1152w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/e8464/Untitled_4.png 1536w,\n/static/911a7f8442d70f9ebf23d2bd2b1cce84/7b0a6/Untitled_4.png 5116w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/911a7f8442d70f9ebf23d2bd2b1cce84/fe486/Untitled_4.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그래서 첫 번째 vmagent가 수집하던 vmstorage의 metric 정보 수집은 멈췄고,</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2b8527c5c76484c4146870516032d9d0/ffcbe/Untitled_5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.77083333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6UlEQVQoz32S2XKbQBRE+YkIZt8AIQlrsRzLqbJTld1xEjurrf//kZNiIHbykocu4Nahoe904eOctltTScuzyjBTkZn8SyLkufUNA1tmTlMOnEqTBjYwE5ZC2UilHKUwmGZBOtzizm4JhzvC4Ra/eYVwC1xoyay0CBPwm3fY7Rfs9jN2c4NZXGUuG0oTMmjbFe3Le9LlkXj5QH31i/riE5XrUTYgp48LE/G7G+zpd+zuG3Z3h+nfUPkVhfYNLnYI5ZAmosISGZYIv0DXa2yzRfkOE1q0azIntEf6DumXWa49xc9PsWlFMUQJdZf/sJQOYecTPMk2VMrjYktIXTarVKCy86yBUaFDmBqhA4XUId8MhiYtqF/cEw5HwvkD/vlP3PYjpTvJkUfO4NoN6eKIPz8SDg+4/Q/MyXtKt6KwoRmjaJd3pGKPDCcIv8LNz4jLc1yzxqcOZdMY19YjFyeu3RO6M3yzpvCxzXXIJz3EFmpUpZDaooxH24BPY2QX5wypSmkeJbVHmYC2kWJWmWyWDafr43Pe66hhj3kuDTqtcetrTP8B019jVm9R7QWVaSlmwvzz8lAh7dJk8mQ+zPOBSIMZTnU/1sXuvo5d7F9TDTv8Y/g/DeY+dmhXj/Wy6akFbo5OPSb16LDgN8y6NLpnC5eVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2b8527c5c76484c4146870516032d9d0/a59e9/Untitled_5.webp 192w,\n/static/2b8527c5c76484c4146870516032d9d0/0ca9f/Untitled_5.webp 384w,\n/static/2b8527c5c76484c4146870516032d9d0/dc9b9/Untitled_5.webp 768w,\n/static/2b8527c5c76484c4146870516032d9d0/e2c2f/Untitled_5.webp 1152w,\n/static/2b8527c5c76484c4146870516032d9d0/f3efb/Untitled_5.webp 1536w,\n/static/2b8527c5c76484c4146870516032d9d0/4e25f/Untitled_5.webp 2550w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2b8527c5c76484c4146870516032d9d0/3b721/Untitled_5.png 192w,\n/static/2b8527c5c76484c4146870516032d9d0/66595/Untitled_5.png 384w,\n/static/2b8527c5c76484c4146870516032d9d0/fe486/Untitled_5.png 768w,\n/static/2b8527c5c76484c4146870516032d9d0/d2d74/Untitled_5.png 1152w,\n/static/2b8527c5c76484c4146870516032d9d0/e8464/Untitled_5.png 1536w,\n/static/2b8527c5c76484c4146870516032d9d0/ffcbe/Untitled_5.png 2550w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2b8527c5c76484c4146870516032d9d0/fe486/Untitled_5.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>두 번째 vmagent가 수집하던 application의 actuator metric은 잘 동작하는 것을 볼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/07795adae6f1ac5bf1d2c97f7d6d2981/49d14/Untitled_6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.04166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACpElEQVQ4y1VU13LbMBDkF9iWxILeCwlKtizb8ST//1+bOTDJTB5uSByuLPYWGOp6RV5vKOsNqe6I9QoXKqwv8HFDSK3/93XaYEOBS63/+1gRS4OLFT6tyHXFIFQCVx4j0zhPAhNzOC8azxeG82JxmjVOo4BQDlwmnE4Czy8TXk7zYS8znp8mPD2PGGeJwfiMZBOaiVDCYuYamy/IOiBIh6gcvPKQJoJpA14MFnGYcRkyBPBqMQsNZSIGCiw2Y5MeihtMi0JVHkU6ZHFY6I0MZqGwZI2JyR7HyKcVWNYYFwEhPQbihimHM1OYmO4IpUuYhMHINS5cYyY0PmPhBpwZzEyDCQPtUvctiznyTMBAsIX2UNYj7ytMjPBxhbKxF+HK9f2eLCxu14T7nQYWOw3C+B7HpIW26UBIE7KxIK4rlAtQNvVuVIiMgmmSITes+45UM5Q5Gv1tSF8CMZBECBFxchkZLiOHUB5cOkyz7DbOAlL57l+YwenMcJkEpA7dR7k0YcoZcr316twmqNQgbEJI29GVjkSUmAAXVyxcQ/gCnRuEiV2ThIpOQFPvUyYx0/FcvSLfP6Hj2kVMunMk9rdPaBJ6KL2J316RXj+6j/jn2v3PIXHTbg/stwfqdsPMVee0Xcn3jrLuHVnIh+/6+kAqW/cdR3Z/RG8PDgkNbZAUpvnggqa50Hqh2yNxIX6IP37EnEfxj0OSzWWS3Uc1hlj2DpdrC2npRvjeiThx0SOkAONilw1XFq/fD9x/fiJtrXMmtENdI9YtQWpDBVt/DNK2I+87FCXbBKED3j8avn40xBy7lIiej19fuH8/EErtBYmKz0fD+1uFtRaDDRm1vWHd773wzBRcKEhlB6FXJmARB4dre+uvz/zntqTSUNsdyhZMzPSb9hsO0ZnQ0bNqtgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/07795adae6f1ac5bf1d2c97f7d6d2981/a59e9/Untitled_6.webp 192w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/0ca9f/Untitled_6.webp 384w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/dc9b9/Untitled_6.webp 768w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/e2c2f/Untitled_6.webp 1152w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/f3efb/Untitled_6.webp 1536w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/a2b77/Untitled_6.webp 2554w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/07795adae6f1ac5bf1d2c97f7d6d2981/3b721/Untitled_6.png 192w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/66595/Untitled_6.png 384w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/fe486/Untitled_6.png 768w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/d2d74/Untitled_6.png 1152w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/e8464/Untitled_6.png 1536w,\n/static/07795adae6f1ac5bf1d2c97f7d6d2981/49d14/Untitled_6.png 2554w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/07795adae6f1ac5bf1d2c97f7d6d2981/fe486/Untitled_6.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3>vmagent HA</h3>\n<p>위에서 생기는 SPOF 문제를 해결하기 위해 vmagent는 <strong>HA</strong>를 지원합니다.</p>\n<p>vmagent는 HA 구성을 위해 여러 대의 vmagent가 하나의 메트릭을 중복해서 수집하도록 합니다.</p>\n<p>여러 대의 vmagent가 같은 구성으로 scraping 대상을 바라보고 있다면 모두가 동시에 데이터를 수집해서 저장소에 push를 하기 때문에 <strong>한 대가 고장나도 정상적으로 데이터를 수집할 수 있습니다.</strong></p>\n<p>물론 같은 메트릭 데이터가 여러 vmagent에서 동시에 들어오기 때문에 <strong>storage에선 데이터 중복 제거 옵션을 켜야만 합니다.</strong></p>\n<p>예를 들어, membersCount=3 으로 vmagent를 3대 띄워놓고 <code class=\"language-text\">promscrape.cluster.replicationFactor</code> 옵션 값으로 2를 주면 2대의 vmagent에서 같은 target에 대해 메트릭을 수집하기 시작합니다.</p>\n<p>그럼 한 번 실제로 시도해보겠습니다.</p>\n<p>각각의 vmagent가 <code class=\"language-text\">replicationFactor=2</code>로 데이터를 수집하고 있는 모습입니다.</p>\n<p>데이터 수집을 잘 분산해둬서 이 중 한 대가 죽어도 메트릭 수집은 멈추지 않는다는 것을 알 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/267aad72c6aae3f3cfa598621b8c23db/7b0a6/Untitled_7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.14583333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5ElEQVQozy2O3U/TUADF+7+jRhJjYuKr8ckXEciYuo1lRlSiLMENCWPAutGPe9vbtbefaztg+xmmJ/m9nJNzcoxvvTc0m/u0Gm/p7D3h484W3YNtus2X9A7fcdDYpdN4TevDFq3dp3T2n9M5eEW7vUOz8Z7D/W0+7WzR3nvGYeMFxulRn1Z3QK9/ynAyRUiN62nGVzOOuyd8/nrO97MzriwPIWMsoRmeDPjS6dM+HvJrdIEtQhwR4soQQ4cRUzcjKRY8cA/rFY9a5AmhLzHdkLLSrNcVULN6WDBXEltkeHrB3WrJ+n9ntXrAEMpjPHFwhE+R50RRRJoVKN/Bt/uMLgcE8pIknJDHU9LIxLLHzGyLa9MiT2OSRJMmmkhrDCFdRlOFUJplXZGkKXVdox6f24rRLCYrasrqnjQrycsV0rrAmg44vxxRZjZV4VIXLnliY0jl46sAHcdkWYbWmqJYMA8D4vAW4ZiEgUWRBaSxR6J9pPznufYNiRZkib/J0jjAUHOFaSscb05ZLjajVX2H1gGRHHAzOUeJEcvC3VBmksAdbri6/kOhJywLwX0pKDOBMXNtbi0X6anNO18p0jRFBCHmrYMtAtRco+MMzw/Q6R1y+gP/poE5PiJyf1LMf1PFZyTBkL+vukMjq5lxIwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/267aad72c6aae3f3cfa598621b8c23db/a59e9/Untitled_7.webp 192w,\n/static/267aad72c6aae3f3cfa598621b8c23db/0ca9f/Untitled_7.webp 384w,\n/static/267aad72c6aae3f3cfa598621b8c23db/dc9b9/Untitled_7.webp 768w,\n/static/267aad72c6aae3f3cfa598621b8c23db/e2c2f/Untitled_7.webp 1152w,\n/static/267aad72c6aae3f3cfa598621b8c23db/f3efb/Untitled_7.webp 1536w,\n/static/267aad72c6aae3f3cfa598621b8c23db/97026/Untitled_7.webp 5116w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/267aad72c6aae3f3cfa598621b8c23db/3b721/Untitled_7.png 192w,\n/static/267aad72c6aae3f3cfa598621b8c23db/66595/Untitled_7.png 384w,\n/static/267aad72c6aae3f3cfa598621b8c23db/fe486/Untitled_7.png 768w,\n/static/267aad72c6aae3f3cfa598621b8c23db/d2d74/Untitled_7.png 1152w,\n/static/267aad72c6aae3f3cfa598621b8c23db/e8464/Untitled_7.png 1536w,\n/static/267aad72c6aae3f3cfa598621b8c23db/7b0a6/Untitled_7.png 5116w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/267aad72c6aae3f3cfa598621b8c23db/fe486/Untitled_7.png\"\n            alt=\"Untitled\"\n            title=\"Untitled\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3>마무리</h3>\n<p>지금까지 vmagent의 매력적인 기능들을 알아봤습니다.</p>\n<p>VictoriaMetrics는 <code class=\"language-text\">Go</code>로 되어 있는 오픈소스이기 때문에 관심있는 분들은 한 번 기여해보셔도 좋을 것 같습니다.</p>\n<p>실습에 사용한 코드는 여기서 확인히실 수 있습니다. <a href=\"https://github.com/gusah009/VictoriaMetrics\" target=\"_blank\" rel=\"nofollow\">https://github.com/gusah009/VictoriaMetrics</a></p>\n<h2>참고</h2>\n<p><a href=\"https://docs.victoriametrics.com/vmagent/\" target=\"_blank\" rel=\"nofollow\">https://docs.victoriametrics.com/vmagent/</a></p>\n<p><a href=\"https://medium.com/@seifeddinerajhi/victoriametrics-a-comprehensive-guide-comparing-it-to-prometheus-and-implementing-kubernetes-03eb8feb0cc2\" target=\"_blank\" rel=\"nofollow\">https://medium.com/@seifeddinerajhi/victoriametrics-a-comprehensive-guide-comparing-it-to-prometheus-and-implementing-kubernetes-03eb8feb0cc2</a></p>\n<p><a href=\"https://docs.victoriametrics.com/faq/#what-is-the-difference-between-vmagent-and-prometheus\" target=\"_blank\" rel=\"nofollow\">https://docs.victoriametrics.com/faq/#what-is-the-difference-between-vmagent-and-prometheus</a></p>\n<p><a href=\"https://docs.victoriametrics.com/faq/#what-is-the-difference-between-vmagent-and-prometheus-agent\" target=\"_blank\" rel=\"nofollow\">https://docs.victoriametrics.com/faq/#what-is-the-difference-between-vmagent-and-prometheus-agent</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"vmagent","summary":"오늘은 VictoriaMetrics의 메트릭 수집기 vmagent에 대해 알아보겠습니다","date":"2024.05.01.","categories":["Infra","VictoriaMetrics","vmagent"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEklEQVQoz5WSSy+DQRSGvxaJEPN8j2BFRBoh7rdE2BKXhYVYYcGyKxsbqy4sROyEH+Cfkran9bWqYZInZ+bMyTvvnJks6zGEzJSaQEU4DiqFfPbnUS/OU2og1ITPoFbI/08wKAtV4TWoRu53wa7rlVrkKZXDybXwJrwLV3mztlysLRjocNOPQ+Ggz36pZayYHBFWhRVhTdgRdoVTYSPmm8KRsC9MCwvCYlu0S7DOg3BvSjfCs7AkXAq3sXcnfAiPwoXwJLx0vHyHZZgSJk3JOH25sYb6eju+0JwwL8wKMxGHe/Ww1DpFGBVOhDNhPa5/HnFL2BMGe/XzZ3ObouUQnRDGTWmgEWEs3NZdD+XfP6Mt+AXnXDRI64P+9wAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/68d04da5ecd5a0773a9774d85a8fa8c7/baae3/victoriaMetrics.png","srcSet":"/static/68d04da5ecd5a0773a9774d85a8fa8c7/7feaf/victoriaMetrics.png 320w,\n/static/68d04da5ecd5a0773a9774d85a8fa8c7/c9c25/victoriaMetrics.png 640w,\n/static/68d04da5ecd5a0773a9774d85a8fa8c7/baae3/victoriaMetrics.png 1280w","sizes":"(min-width: 1280px) 1280px, 100vw"},"sources":[{"srcSet":"/static/68d04da5ecd5a0773a9774d85a8fa8c7/83dfe/victoriaMetrics.webp 320w,\n/static/68d04da5ecd5a0773a9774d85a8fa8c7/83510/victoriaMetrics.webp 640w,\n/static/68d04da5ecd5a0773a9774d85a8fa8c7/9d163/victoriaMetrics.webp 1280w","type":"image/webp","sizes":"(min-width: 1280px) 1280px, 100vw"}]},"width":1280,"height":640}},"publicURL":"/static/68d04da5ecd5a0773a9774d85a8fa8c7/victoriaMetrics.png"}}}}]}},"pageContext":{"slug":"/infra/2024-05-01-vmagent/"}},"staticQueryHashes":["2518467932","429584967"]}